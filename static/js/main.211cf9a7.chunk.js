(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(e,t,a){e.exports=a.p+"static/media/white-logo-plus-name-final-01.ae4733f6.svg"},225:function(e,t,a){e.exports=a.p+"static/media/burger-icon-01.eef32ba4.svg"},341:function(e,t,a){e.exports=a.p+"static/media/cloud-computing-01-01.76a8ebdf.png"},342:function(e,t,a){e.exports=a.p+"static/media/ai-process-01-01.a493823f.png"},343:function(e,t,a){e.exports=a.p+"static/media/report-vector-01-01.8feec911.png"},344:function(e,t,a){e.exports=a.p+"static/media/Creative_process_SVG.002c7f52.svg"},345:function(e,t,a){e.exports=a.p+"static/media/pavement-without-ai.d02eafd6.jpg"},346:function(e,t,a){e.exports=a.p+"static/media/Data_analysis_SVG.781c725f.svg"},347:function(e,t,a){e.exports=a.p+"static/media/City_SVG.1f3498c5.svg"},367:function(e,t,a){e.exports=a.p+"static/media/demo.6318aa84.jpg"},368:function(e,t,a){e.exports=a.p+"static/media/semantic-segmentation.json.a51c4372.resp"},369:function(e,t,a){e.exports=a.p+"static/media/object-detection.json.b776f784.resp"},383:function(e,t,a){e.exports=a(644)},388:function(e,t,a){},512:function(e,t,a){e.exports=a.p+"static/media/pavement-with-ai.ef770fa6.jpg"},513:function(e,t,a){e.exports=a.p+"static/media/Analytics_SVG.eb5c9f14.svg"},523:function(e,t){},525:function(e,t){},55:function(e,t,a){},629:function(e,t,a){},641:function(e,t,a){},644:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(36),i=a.n(l),o=(a(388),a(14)),c=a(15),s=a(17),u=a(16),m=a(672),d=a(669),p=a(668),h=a(372),g=a(140),f=a(176),E=a.n(f),v=a(225),b=a.n(v),y=(a(55),a(37)),w=a(139),k=a(88),C=a(84),x=a(122),j=a(107),O=a.n(j);function S(e,t,a){return new Promise(function(n,r){return O.a[e.toLowerCase()](t,a).then(function(e){return n(e.data)}).catch(function(e){return r(e.response.data.error)})})}function I(e,t,a){return new Promise(function(n,r){return O.a[e.toLowerCase()](t,a,{headers:{"content-type":"multipart/form-data"}}).then(function(e){return n(e.data)}).catch(function(e){return r(e.response.data.error)})})}var D="SET_CURRENT_USER",R=function(e){return{type:"ADD_ERROR",error:e}},A=function(){return{type:"REMOVE_ERROR"}};function L(e){return{type:D,user:e}}function F(e){!function(e){e?O.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete O.a.defaults.headers.common.Authorization}(e)}var N=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).targetElement=null,n.navbarOn=function(){var e=n.state.mobileNav;n.setState({mobileNav:!e}),(e=!e)?Object(w.disableBodyScroll)(n.targetElement):Object(w.clearAllBodyScrollLocks)()},n.onLinkClick=function(e){e.preventDefault();var t=e.target.name;Object(w.clearAllBodyScrollLocks)(),n.setState({mobileNav:!1}),n.props.history.push(t)},n.state={mobileNav:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.targetElement=document.querySelector(".mobile-overlay")}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.onRouteChanged()}},{key:"onRouteChanged",value:function(){this.setState({mobileNav:!1}),Object(w.clearAllBodyScrollLocks)()}},{key:"render",value:function(){var e=this,t=this.props.language?this.props.language:"en",a=t.indexOf("es")>-1,l=this.state.mobileNav,i=l?"open":"closed",o="mobile-overlay-closed",c=this.props.location;return l&&(o="mobile-overlay-open"),r.a.createElement(n.Fragment,null,r.a.createElement(m.a,m.a.onlyComputer,r.a.createElement(d.a,{className:"App-nav",inverted:!0,style:{margin:"0",position:"absolute",width:"100%",zIndex:"100"}},r.a.createElement(p.a,{inverted:!0,secondary:!0},r.a.createElement(p.a.Item,null,r.a.createElement("a",{href:this.props.currentUser&&this.props.currentUser.isAuthenticated?"/#/dashboard":"/#"},r.a.createElement(h.a,{size:"small",alt:"engin.ai logo",src:E.a}))),r.a.createElement(p.a.Menu,{position:"right"},r.a.createElement(p.a.Item,{name:"Data-labeling",active:"/data-labeling"===c.pathname,href:"#/data-labeling",target:"_self"},"en"===t?"Data Labeling":"Etiquetado de Datos"),r.a.createElement(p.a.Item,null,r.a.createElement(g.a,{item:!0,text:"en"===t?"Industry-Specific Solutions":"Soluciones Especializadas",options:[{key:1,text:"Pavement Damage Analysis",value:1,target:"_self",href:"#/pavements-analysis",className:"navDropDownItem"}]})),this.props.currentUser&&this.props.currentUser.isAuthenticated?r.a.createElement(p.a.Item,{name:"Logout",style:{cursor:"pointer"},onClick:function(){e.props.logout(),e.props.history.push("/")}},"en"===t?"Logout":"Cerrar Sesi\xf3n"):r.a.createElement(p.a.Item,{name:"Login",onClick:function(){e.props.history.push("/signin")}},"en"===t?"Login":"Iniciar Sesi\xf3n"))))),r.a.createElement(m.a,m.a.onlyMobile,r.a.createElement("div",{style:{overflow:"hidden",maxHeight:"100vh",zIndex:"200"}},r.a.createElement("div",{className:"mobile-overlay ".concat(o),style:{maxHeight:"150vh"}}),l?r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{height:"100vh",zIndex:"120",position:"absolute",width:"100%"}},r.a.createElement(d.a,{className:"App-nav",inverted:!0},r.a.createElement(p.a,{inverted:!0,secondary:!0},r.a.createElement(p.a.Item,null,r.a.createElement(h.a,{onClick:this.onLinkClick,name:this.props.currentUser&&this.props.currentUser.isAuthenticated?"/#/dashboard":"/#",size:"small",src:E.a})),r.a.createElement(p.a.Menu,{position:"right"},r.a.createElement(p.a.Item,null,r.a.createElement(h.a,{onClick:this.navbarOn,style:{width:"38px",height:"29px"},size:"tiny",src:b.a})))),r.a.createElement(p.a,{vertical:!0,inverted:!0,className:"menu-item-group"},r.a.createElement(p.a.Item,{className:"mobile-menu-item ".concat(i),href:"#/data-labeling"},a?"Etiquetado de Datos":"Data Labeling"),r.a.createElement(p.a.Item,{className:"mobile-menu-item ".concat(i),href:"#/pavements-analysis"},a?"An\xe1lisis de Da\xf1os en Pavimentos":"Pavement Damage Analysis"),r.a.createElement(p.a.Item,{className:"mobile-menu-item ".concat(i)},r.a.createElement(y.HashLink,{to:"/#contact-us"},a?"Cont\xe1ctenos":"Contact Us")))))):null),r.a.createElement(d.a,{className:"App-nav",inverted:!0,style:{margin:"0",position:"absolute",width:"100%",zIndex:"100"}},r.a.createElement(p.a,{inverted:!0,secondary:!0},r.a.createElement(p.a.Item,null,r.a.createElement(y.HashLink,{to:"/#",target:"_self"},r.a.createElement(h.a,{size:"small",alt:"engin.ai logo",src:E.a}))),r.a.createElement(p.a.Menu,{position:"right"},r.a.createElement(p.a.Item,null,r.a.createElement(h.a,{onClick:this.navbarOn,style:{width:"38px",height:"29px"},size:"tiny",src:b.a})))))))}}]),a}(n.Component);var _=Object(k.o)(Object(C.b)(function(e){return{currentUser:e.currentUser,errors:e.errors,language:e.language}},{logout:function(){return function(e){localStorage.clear(),F(!1),e(L({}))}}})(N)),P=a(340),T=a.n(P),U=a(48),H=a(29),z=function(e){if(e)return localStorage.setItem("language",e),{type:"SET_USER_LANGUAGE",language:e}},M=function(e){return e?{type:"UPDATE_USER",user:Object(H.a)({},e)}:{}};var q=a(646),B=a(68),W=a(657),G=a(670),V=a(658),$=a(659),J=function(e){var t=e.tilt||"tilt-down",a=e.background||"#ffffff",n="extra-border-inner-".concat(t);return r.a.createElement("div",{className:"border-diagonal"},r.a.createElement("div",{className:"extra-border-outer"},r.a.createElement("div",{className:n,style:{backgroundColor:"".concat(a)}})))},Y=a(341),Q=a.n(Y),Z=a(342),K=a.n(Z),X=a(343),ee=a.n(X),te=a(344),ae=a.n(te),ne=a(345),re=a.n(ne),le=(a(512),a(346)),ie=a.n(le),oe=(a(513),a(347)),ce=a.n(oe),se=(a(514),a(663)),ue=a(32),me=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(se.a,{style:{display:"inline-block"},size:"huge",action:"https://formspree.io/engin.ai.solutions@gmail.com",method:"POST"},r.a.createElement(se.a.Group,{widths:"equal"},r.a.createElement(se.a.Field,{required:!0},r.a.createElement("label",{htmlFor:"email",style:{display:"none"}},"Email"),r.a.createElement(se.a.Input,{required:!0,id:"email",name:"name",type:"email",placeholder:"Email*"})),r.a.createElement("label",{htmlFor:"company_name",style:{display:"none"}},"Company Name"),r.a.createElement(se.a.Input,{name:"name",id:"company_name",placeholder:"Company Name"})),r.a.createElement(se.a.Field,{required:!0},r.a.createElement("label",{htmlFor:"comments",style:{display:"none"}},"Comments"),r.a.createElement(se.a.TextArea,{rows:10,id:"comments",required:!0,name:"name",placeholder:"Comment*"})),r.a.createElement(q.a,{onClick:function(){ue.a.event({category:"Lead",action:"Contact Us Form Start Submission",label:"Start of Contact Us Submission"})},size:"huge",type:"submit",className:"CTA-2"},"Contact Us"))}}]),a}(r.a.Component),de=a(83),pe=function(e){e.browserLang;var t=e.language.indexOf("es")>-1;return r.a.createElement(n.Fragment,null,r.a.createElement(de.Helmet,null,r.a.createElement("title",null,"Engin.ai - AI Solutions for Engineers | AI Consulting, data labeling, damage analysis in pavements"),r.a.createElement("meta",{name:"description",content:"At Engin.AI we create custom AI solutions for engineering companies . We offer data labeling services, AI consulting, and pavement analysis with computer vision"}),r.a.createElement("meta",{property:"og:title",content:"Engin.AI - AI Solutions for Engineers | Your AI Strategic Partner"}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://www.engin.ai"}),r.a.createElement("meta",{property:"og:description",content:"At Engin.AI we create custom AI solutions for engineering companies . We offer data labeling services, AI consulting, and pavement analysis with computer vision"}),r.a.createElement("meta",{name:"keywords",content:"engin ai, enginai, engin.ai, ai for engineers, ai consulting,  data labeling services, AI solutions, computer vision, damage analysis in pavements"}),r.a.createElement("meta",{name:"robots",content:"index, follow"}),r.a.createElement("meta",{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}),r.a.createElement("meta",{name:"language",content:"English"}),r.a.createElement("meta",{name:"author",content:"Javier Urbina"}),r.a.createElement("meta",{property:"og:image",content:"%PUBLIC_URL%/full-color-logo-only-01-01.png"})),r.a.createElement("header",{className:"App-header"},r.a.createElement(d.a,{basic:!0,style:{width:"70%",zIndex:"10"}},r.a.createElement("h1",{style:{textTransform:"uppercase"}},t?"Empoderamos su negocio con inteligencia artificial":"Empowering your business with artificial intelligence"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,t?"Haga parte de la 4ta revoluci\xf3n industrial con Engin.ai, su aliado estrat\xe9gico":"Enter the 4th industrial revolution with Engin.ai, your strategic partner"),r.a.createElement("br",null),r.a.createElement(y.HashLink,{to:"/#contact-us"},r.a.createElement(q.a,{className:"mainCTABtn",inverted:!0,size:"huge",syle:{width:"50%"},onClick:function(){ue.a.event({category:"Contact Us",action:"Contact Us Main Btn Click",label:"Homepage Main Btn"})}},t?r.a.createElement("span",{className:"buttonText"},"Cont\xe1ctenos"):r.a.createElement("span",null,"Contact Us"),r.a.createElement("span",{className:"iconContainer",style:{display:"inline-block",width:"10px"}},r.a.createElement(B.a,{name:"chevron right"})))))),r.a.createElement(J,{tilt:"tilt-down"}),r.a.createElement("section",null,r.a.createElement(W.a,null,r.a.createElement("h1",null,t?"Lo que ofrecemos":"What we offer"),r.a.createElement(G.a,{centered:!0,stackable:!0,columns:2,divided:!0},r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement(d.a,{basic:!0},r.a.createElement(G.a,{container:!0,centered:!0},r.a.createElement(G.a.Row,null,r.a.createElement(h.a,{alt:"people around a table analyzing data",className:"custom-icon",size:"small",src:ie.a})),r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,t?"Etiquetado de datos":"Data Labeling")),r.a.createElement(G.a.Row,null,r.a.createElement(d.a,{compact:!0,basic:!0,size:"large",style:{padding:"0"}},t?"Los algoritmos de aprendizaje s\xf3lo ser\xe1n tan buenos como los datos usados para entrenarlos. Nosotros le ayudamos con el proceso de etiquetado para que usted s\xf3lo se preocupe de entrenar sus modelos.":"A learning model will only be as good as the data used to train it. Our expert team will help you label your data so you only need to worry about training and using your model.")),r.a.createElement(G.a.Row,null,r.a.createElement(q.a,{onClick:function(){ue.a.event({category:"Learn More",action:"Learn More - Data Labeling",label:"Homepage Learn More Btn - Data Labeling"})},href:"/#data-labeling",color:"green"},t?"Aprender M\xe1s":"Learn More"))))),r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement(d.a,{basic:!0},r.a.createElement(G.a,{container:!0,centered:!0},r.a.createElement(G.a.Row,null,r.a.createElement(h.a,{alt:"buildings in a city",className:"custom-icon",size:"small",src:ce.a})),r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,t?"An\xe1lisis de da\xf1o de pavimentos":"Damage Analysis in Pavements")),r.a.createElement(G.a.Row,null,r.a.createElement(d.a,{compact:!0,basic:!0,size:"large",style:{padding:"0"}},t?"\xbfTiene fotos de pavimentos para analizar? Con nuestros algoritmos de visi\xf3n computacional, nosotros podemos analizarlos con gran precisi\xf3n y en tiempo r\xe9cord":"Do you have photos pavements to analyze? With our computer vision algorithms, we can analyze them with great accuracy and in a record time")),r.a.createElement(G.a.Row,null,r.a.createElement(q.a,{onClick:function(){ue.a.event({category:"Learn More",action:"Learn More - Damage Analysis in Pavements",label:"Homepage Learn More Btn - Damage Analysis in Pavements"})},href:"/#pavements-analysis",color:"green"},t?"Aprender M\xe1s":"Learn More"))))),r.a.createElement(V.a,null),r.a.createElement(V.a,null)))),r.a.createElement(J,{background:"whitesmoke",tilt:"tilt-up"}),r.a.createElement("section",null,r.a.createElement(G.a,{container:!0,stackable:!0,columns:2,verticalAlign:"middle"},r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement($.a,{autoplay:!0,id:"RVRfjraqpfc",placeholder:re.a,source:"youtube",onClick:function(){ue.a.event({category:"Demo Video",action:"Video Play",label:"Homepage Demo Video Play"})}})),r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement("h1",null,t?"El Programa en Acci\xf3n":"Our Software in Action"),r.a.createElement(d.a,{basic:!0,size:"massive",style:{lineHeight:"1.5"}},t?"Usamos algoritmos de visi\xf3n computacional para analizar y clasificar da\xf1os en diversos pavimentos.":"We use computer vision algorithms to analyze and classify damages in different pavements."),r.a.createElement(q.a,{onClick:function(){ue.a.event({category:"Learn More",action:"Learn More - Pavements Analysis",label:"Homepage Learn More Btn - Pavements Analysis"})},className:"CTA-2",size:"huge",href:"/#/pavements-analysis"},t?"Aprender m\xe1s":"Learn more")))),r.a.createElement(J,{background:"white",tilt:"tilt-up"}),r.a.createElement("section",{className:"purpleBack"},r.a.createElement(G.a,{container:!0,stackable:!0,columns:2,verticalAlign:"middle"},r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement("h1",null,t?"Por qu\xe9 escoger a Engin.ai":"Why Choose Engin.ai"),r.a.createElement(d.a,{basic:!0,size:"massive",style:{lineHeight:"1.5"}},t?"Tenemos un equipo de profesionales cualificados en diferentes \xe1reas de conocimientos. Esto nos permite trabajar con clientes en diversas industrias, y facilita el desarrollo de soluciones innovadoras para nuestros clientes.":"We have a qualified team of professionals in diverse areas. This allows us to work with our clients across different industries and enables us to create innovative enterprise solutions for our clients.")),r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement(d.a,{basic:!0},r.a.createElement(h.a,{alt:"people around a table with a light bulb in the middle",src:ae.a}))))),r.a.createElement(J,{background:"#5a72ff",tilt:"tilt-up"}),r.a.createElement("section",{style:{background:"#5a72ff"}},r.a.createElement(W.a,null,r.a.createElement("h1",{style:{color:"white"}},t?"C\xf3mo Funciona":"How it works"),r.a.createElement(G.a,{centered:!0,stackable:!0,columns:3},r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement(d.a,null,r.a.createElement(G.a,{container:!0,centered:!0},r.a.createElement(G.a.Row,null,r.a.createElement(h.a,{alt:"a cloud with a database icon",className:"custom-icon",size:"tiny",src:Q.a})),r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,t?"Env\xedo":"Upload")),r.a.createElement(G.a.Row,null,r.a.createElement(d.a,{compact:!0,basic:!0,size:"large",style:{padding:"0"}},t?"Env\xedanos de forma segura los datos que necesitas analizar.":"Send us the data that you need to analyze."))))),r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement(d.a,null,r.a.createElement(G.a,{container:!0,centered:!0},r.a.createElement(G.a.Row,null,r.a.createElement(h.a,{alt:"a brain merged with a gear",className:"custom-icon",size:"tiny",src:K.a})),r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,t?"An\xe1lisis":"Analyze")),r.a.createElement(G.a.Row,null,r.a.createElement(d.a,{compact:!0,basic:!0,size:"large",style:{padding:"0"}},t?"Nosotros analizamos los datos con nuestros algoritmos de visi\xf3n computacional.":"We analyze the data using our computer vision algorithms."))))),r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement(d.a,null,r.a.createElement(G.a,{container:!0,centered:!0},r.a.createElement(G.a.Row,null,r.a.createElement(h.a,{alt:"icon with a report and a checkmark",className:"custom-icon",size:"tiny",src:ee.a})),r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,t?"Reporte":"Report")),r.a.createElement(G.a.Row,null,r.a.createElement(d.a,{compact:!0,basic:!0,size:"large",style:{padding:"0"}},t?"Recibe un reporte con el insight que necesitas para tomar decisiones informadas.":"Receive a report with the insight that you need to make informed decisions.")))))))),r.a.createElement(J,{background:"white",tilt:"tilt-down"}),r.a.createElement("section",{className:"announcement-section",id:"announcements"},r.a.createElement(G.a.Row,{centered:!0},r.a.createElement("h1",null,t?"Finalistas Fase 1 en Competencia Mundial de Inteligencia Artificial":"Phase 1 Finalists in Worldwide AI Competition")),r.a.createElement(G.a,{container:!0,stackable:!0,columns:2,verticalAlign:"middle"},r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement("h1",null,"OpenCV AI Competition"),r.a.createElement(d.a,{basic:!0,size:"massive",style:{lineHeight:"1.5"}},t?r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Nuestro producto, RoadEngin, ha sido seleccionado como finalista en la Fase 1 de la competencia mundial de OpenCV. \xa1Con este producto esperamos revolucionar la industria de Ingenier\xeda de Pavimentos!"),r.a.createElement("p",null,"\xa1S\xedganos en ",r.a.createElement("a",{href:"https://www.linkedin.com/company/engin-ai"},"LinkedIn")," para mantenerse al tanto de nuestro producto!  Para m\xe1s informaci\xf3n sobre la competencia, visite",r.a.createElement("a",{style:{paddingLeft:"10px"},href:"https://opencv.org/opencv-ai-competition-2021/"},t?"la p\xe1gina oficial de la competencia":"the official competition page"))):r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"Our product, RoadEngin, has been selected as a Phase 1 finalist in the Worldwide competition hosted by OpenCV. Our goal is to revolutionize the Road Survey industry with this product!"),r.a.createElement("p",null,"Follow us in ",r.a.createElement("a",{href:"https://www.linkedin.com/company/engin-ai"},"LinkedIn")," for more updates! For more information about the competition, see",r.a.createElement("a",{style:{paddingLeft:"10px"},href:"https://opencv.org/opencv-ai-competition-2021/"},t?"la p\xe1gina oficial de la competencia":"the official competition page"))))),r.a.createElement(G.a.Column,{style:{zIndex:"3"}},r.a.createElement(d.a,{basic:!0},r.a.createElement(h.a,{alt:"people around a table with a light bulb in the middle",src:"https://opencv.org/wp-content/uploads/2021/03/OAK2021-5-@2x.png"}))))),r.a.createElement(J,{background:"white",tilt:"tilt-down"}),r.a.createElement("section",{className:"cta-section",id:"contact-us"},r.a.createElement(G.a.Row,{centered:!0},r.a.createElement("h1",null,t?"Entre a la era AI con Engin.ai":"Enter the AI era with Engin.ai")),r.a.createElement(G.a.Row,{centered:!0},r.a.createElement("p",null,t?"Perm\xedtanos ayudarle a automatizar tareas para que usted pueda enfocarse en lo que sabe hacer mejor.":"We can help you automate tasks so you can focus on doing what you do best.")),r.a.createElement(V.a,null),r.a.createElement(G.a.Row,{centered:!0},r.a.createElement(W.a,{textAlign:"center"},r.a.createElement(me,{style:{display:"inline-block"}})))))},he=a(654),ge=a(656),fe=function(e){var t=e.browserLang.indexOf("es")>-1,a="linear-gradient(45deg, rgba(0, 26, 255, 0.7) 1%, rgb(99, 97, 238) 30%, rgb(119, 99, 213) 69%, rgb(161, 103, 161) 100%),url(".concat("images/background-image-hero.jpg",")");return r.a.createElement("header",{className:"App-hero",style:{minHeight:"100vh",backgroundImage:a,color:"white"}},r.a.createElement(de.Helmet,null,r.a.createElement("title",null,"Engin.AI - Data Labeling Services"),r.a.createElement("meta",{name:"description",content:"A learning model will only be as good as the data used to train it. Our expert team will help you label your data so you only need to worry about training and using your models"}),r.a.createElement("meta",{property:"og:title",content:"Engin.AI - Data Labeling Services For AI"}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://www.engin.ai"}),r.a.createElement("meta",{property:"og:description",content:"A learning model will only be as good as the data used to train it. Our expert team will help you label your data so you only need to worry about training and using your models"}),r.a.createElement("meta",{name:"keywords",content:"engin ai, enginai, engin.ai, data labeling services, AI solutions, computer vision, damage analysis in pavements"}),r.a.createElement("meta",{name:"robots",content:"index, follow"}),r.a.createElement("meta",{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}),r.a.createElement("meta",{name:"language",content:"English"}),r.a.createElement("meta",{name:"author",content:"Javier Urbina"}),r.a.createElement("meta",{property:"og:image",content:"%PUBLIC_URL%/full-color-logo-only-01-01.png"})),r.a.createElement(d.a,{basic:!0,style:{width:"70%",zIndex:"10"},className:"cta-hero-section"},r.a.createElement(G.a,{stackable:!0},r.a.createElement(G.a.Row,{columns:2},r.a.createElement(G.a.Column,{style:{textAlign:"left"}},r.a.createElement("h1",{style:{textTransform:"uppercase"}},t?"Etiquetado de Datos":"Data labeling"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",{style:{lineHeight:"1.5"}},t?"Los algoritmos de aprendizaje s\xf3lo ser\xe1n tan buenos como los datos usados para entrenarlos. Nosotros le ayudamos con el proceso de etiquetado para que usted s\xf3lo se preocupe de entrenar sus modelos.":"A learning model will only be as good as the data used to train it. Our expert team will help you label your data so you only need to worry about training and using your models."),r.a.createElement("br",null)),r.a.createElement(G.a.Column,null,r.a.createElement(d.a,null,r.a.createElement(se.a,{action:"https://formspree.io/engin.ai.solutions@gmail.com",method:"POST",style:{color:"black"}},r.a.createElement("h2",null,t?"Cont\xe1ctenos para Hacer un Demo":"Request a Demo"),r.a.createElement(d.a,{basic:!0,style:{textAlign:"left"}},r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"user_name"},"Name"),r.a.createElement(he.a,{name:"name",id:"user_name",placeholder:"John Doe"})),r.a.createElement(se.a.Field,{required:!0},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(he.a,{required:!0,name:"name",id:"email",placeholder:"jdoe@example.com"})),r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"company"},"Company"),r.a.createElement(he.a,{name:"name",id:"company",placeholder:"My Business"})),r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"comment"},"Comment"),r.a.createElement(ge.a,{name:"name",id:"comment"}))),r.a.createElement(q.a,{type:"submit",color:"red",size:"huge",syle:{width:"50%"}},t?r.a.createElement("span",{className:"buttonText"},"Cont\xe1ctenos"):r.a.createElement("span",null,"Contact Us"),r.a.createElement("span",{className:"iconContainer",style:{display:"inline-block",width:"10px"}},r.a.createElement(B.a,{name:"chevron right"})))))))),r.a.createElement(y.HashLink,{to:"/#contact-us"})))},Ee=a(34),ve=a(18),be=a(667),ye=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=n.props.signUp?"signup":"signin";if(n.props.signUp){if(n.state.password!==n.state.password_confirm)return void n.setState({error:!0,errorMsg:"Your passwords don't match. Try again"});e.target.reset()}if(""!==n.state.a_password)return ue.a.event({category:"Fake Sign Up",action:"Captcha triggered"}),void n.setState({error:!0,errorMsg:"Your sign up is suspicious. Please try again later"});"signup"===t?n.props.onAuth(t,{email:n.state.email.toLowerCase(),password:n.state.password,f_name:n.state.f_name,l_name:n.state.l_name,profileImageUrl:n.state.profileImageUrl}).then(function(){ue.a.event({category:"Sign Up",action:"User Signed Up"}),n.props.history.push("/")}).catch(function(){}):"signin"===t&&n.props.onAuth(t,{email:n.state.email.toLowerCase(),password:n.state.password}).then(function(){ue.a.event({category:"Sign In",action:"User Signed In"}),n.props.history.push("/dashboard")}).catch(function(){})},n.handleChange=function(e){n.setState(Object(Ee.a)({},e.target.name,e.target.value.trim()))},n.state={email:"",password:"",profileImageUrl:"",f_name:"",l_name:"",password_confirm:"",error:!1,errorMsg:"",agreedToTerms:!1,a_password:"",company:""},n.onCheckboxSelect=n.onCheckboxSelect.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"onCheckboxSelect",value:function(){this.setState({agreedToTerms:!this.state.agreedToTerms})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.f_name,l=e.l_name,i=e.password_confirm,o=e.a_password,c=this.props,s=c.signUp,u=c.heading,m=c.buttonText,d=c.errors,p=c.history,h=c.removeError,g=this.props.language;p.listen(function(){h()});var f=!!this.props.removeAdditionalField&&this.props.removeAdditionalField,E=this.props.customWidth?this.props.customWidth:"50%";return r.a.createElement("div",null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"ui container"},r.a.createElement("div",{className:"ui one column centered grid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"ui segments",id:"authform",style:{width:E}},r.a.createElement("div",{className:"ui segment"},r.a.createElement("h1",null,u),d.message&&r.a.createElement(be.a,{error:!0,content:d.message}),this.state.error&&""!==this.state.errorMsg&&r.a.createElement(be.a,{error:!0,content:this.state.errorMsg})),r.a.createElement("div",{className:"ui left aligned segment"},r.a.createElement("div",{className:"ui form registerForm"},r.a.createElement(se.a,{error:this.state.error,onSubmit:this.handleSubmit},r.a.createElement("div",{style:{display:"none"}},r.a.createElement(se.a.Input,{style:{display:"none"},required:!1,alt:"Please leave this field empty",tabIndex:"-1",autoComplete:"somepassword",id:"a_password",name:"a_password",onChange:this.handleChange,value:o,placeholder:"**********"})),s&&r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"en"===g?"First Name":"Nombre",autoComplete:"off",id:"f_name",name:"f_name",onChange:this.handleChange,type:"text",value:n,placeholder:"John"}),r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"en"===g?"Last Name":"Apellido",autoComplete:"off",id:"l_name",name:"l_name",onChange:this.handleChange,type:"text",value:l,placeholder:"Doe"}))),r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"Email",autoComplete:"off",id:"email",name:"email",onChange:this.handleChange,type:"email",value:t,placeholder:"johndoe@engin-ai.com"})),r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"en"===g?"Password":"Contrase\xf1a",autoComplete:"off",id:"password",name:"password",onChange:this.handleChange,type:"password",value:a,placeholder:"**********"})),s&&r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"en"===g?"Confirm password":"Confirma la Contrase\xf1a",autoComplete:"off",id:"password_confirm",name:"password_confirm",onChange:this.handleChange,type:"password",value:i,placeholder:"**********"})),s&&r.a.createElement(se.a.Field,{required:!0},r.a.createElement("div",{className:"ui checkbox"},r.a.createElement("input",{checked:this.state.agreedToTerms,onChange:this.onCheckboxSelect,required:!0,type:"checkbox",name:"agree"}),r.a.createElement("label",null,r.a.createElement("span",null,"en"===g?"I accept the":"Acepto los"," ",r.a.createElement("a",{href:"/terms-of-use"},"en"===g?"Terms and Conditions":"T\xe9rminos y Condiciones")," ","en"===g?"and the":"y la"," ",r.a.createElement("a",{href:"/privacy-policy"},"en"===g?"Privacy Policy":"Pol\xedtica de Privacidad"))))),r.a.createElement("button",{disabled:s?!this.state.agreedToTerms||""===this.state.email||""===this.state.password||""===this.state.f_name||""===this.state.l_name:""===this.state.email||""===this.state.password,className:"ui red large fluid button",type:"submit"},m),s&&r.a.createElement(be.a,{error:!0,content:"en"===g?"Passwords do not match":"Las contrase\xf1as no son iguales"})))))),!f&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"ui segment"},s?"en"===g?"Already have an account?":"\xbfYa tienes una cuenta?":"en"===g?"Not a member yet? Create a free account":"Crea una cuenta gratuita","  ",r.a.createElement("a",{href:s?"/signin":"/signup"},s?"en"===g?"Sign In":"Ingresa":"en"===g?"here":"aqu\xed"),"."))))))}}]),a}(n.Component),we=function(e){e.browserLang;var t=!!e.signUp&&e.signUp,a="linear-gradient(45deg, rgb(108, 16, 204) 1%, rgb(126, 81, 177) 30%, rgb(162, 98, 153) 69%, rgba(220, 40, 55, 0.7) 100%),url(".concat("images/background-image-hero.jpg",")"),n=!!e.removeAdditionalField&&e.removeAdditionalField,l=e.heading?e.heading:"",i=e.buttonText?e.buttonText:"Signin",o=e.removeError?e.removeError:function(){return console.log("remove error")},c=e.onAuth?e.onAuth:function(){return console.log("error")},s=e.errors?e.errors:null;return r.a.createElement("div",{style:{background:"whitesmoke",height:"100vh"}},r.a.createElement("header",{className:"App-hero",style:{minHeight:"75px",backgroundImage:a,color:"white"}}),r.a.createElement(W.a,{style:{paddingTop:"50px"}},r.a.createElement(ye,Object.assign({onAuth:c,removeAdditionalField:n,errors:s,removeError:o,heading:l,buttonText:i,signUp:t},e))))},ke=function(e){var t=e.browserLang.indexOf("es")>-1,a="linear-gradient(45deg, rgb(229, 44, 78) 1%, rgb(233, 74, 99) 30%, rgb(174, 82, 157) 69%, rgb(154, 85, 177) 100%),url(".concat("images/background-image-hero.jpg",")");return r.a.createElement("header",{className:"App-hero",style:{minHeight:"100vh",backgroundImage:a,color:"white"}},r.a.createElement(de.Helmet,null,r.a.createElement("title",null,"Engin.AI - Pavement Damage Analysis |Pavement Inspection and Auditing"),r.a.createElement("meta",{name:"description",content:"Save money and increase accuracy of your pavement inspections using our AI -powered software to detect damages in pavement and its different categories."}),r.a.createElement("meta",{property:"og:title",content:"Engin.AI - AI Consulting | Data Strategy | AI Strategy"}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://www.engin.ai"}),r.a.createElement("meta",{property:"og:description",content:"Save money and increase accuracy of your pavement inspections using our AI -powered software to detect damages in pavement and its different categories."}),r.a.createElement("meta",{name:"keywords",content:"engin ai, enginai, engin.ai, AI for civil engineering, computer vision, pavement inspection, pavement inspection with ai, pavement inspection machine learning"}),r.a.createElement("meta",{name:"robots",content:"index, follow"}),r.a.createElement("meta",{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}),r.a.createElement("meta",{name:"language",content:"English"}),r.a.createElement("meta",{name:"author",content:"Javier Urbina"}),r.a.createElement("meta",{property:"og:image",content:"%PUBLIC_URL%/full-color-logo-only-01-01.png"})),r.a.createElement(d.a,{basic:!0,style:{width:"70%",zIndex:"10"},className:"cta-hero-section"},r.a.createElement(G.a,{stackable:!0},r.a.createElement(G.a.Row,{columns:2},r.a.createElement(G.a.Column,{style:{textAlign:"left"}},r.a.createElement("h1",{style:{textTransform:"uppercase"}},t?"An\xe1lisis de Da\xf1os en Pavimentos":"Analysis of Pavement Damage"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",{style:{lineHeight:"1.5"}},t?"\xbfTiene fotos de pavimentos para analizar? Con nuestros algoritmos de visi\xf3n computacional, nosotros podemos analizarlos con gran precisi\xf3n y a un tiempo r\xe9cord en tiempo r\xe9cord.":"Do you have photos pavements to analyze? With our computer vision algorithms, we can analyze them with great accuracy and in a record time."),r.a.createElement("br",null)),r.a.createElement(G.a.Column,null,r.a.createElement(d.a,null,r.a.createElement(se.a,{action:"https://formspree.io/engin.ai.solutions@gmail.com",method:"POST",style:{color:"black"}},r.a.createElement("h2",null,t?"Cont\xe1ctenos para Hacer un Demo":"Request a Demo"),r.a.createElement(d.a,{basic:!0,style:{textAlign:"left"}},r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"user_name"},"Name"),r.a.createElement(he.a,{name:"name",id:"user_name",placeholder:"John Doe"})),r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(he.a,{required:!0,name:"name",id:"email",placeholder:"jdoe@example.com"})),r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"company"},"Company"),r.a.createElement(he.a,{name:"name",id:"company",placeholder:"My Business"})),r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"comment"},"Comment"),r.a.createElement(ge.a,{name:"name",id:"comment"}))),r.a.createElement(q.a,{type:"submit",color:"red",size:"huge",syle:{width:"50%"}},t?r.a.createElement("span",{className:"buttonText"},"Cont\xe1ctenos"):r.a.createElement("span",null,"Contact Us"),r.a.createElement("span",{className:"iconContainer",style:{display:"inline-block",width:"10px"}},r.a.createElement(B.a,{name:"chevron right"})))))))),r.a.createElement(y.HashLink,{to:"/#contact-us"})))},Ce=function(e){var t=e.browserLang.indexOf("es")>-1,a="linear-gradient(45deg, rgb(108, 16, 204) 1%, rgb(126, 81, 177) 30%, rgb(162, 98, 153) 69%, rgba(220, 40, 55, 0.7) 100%),url(".concat("images/background-image-hero.jpg",")");return r.a.createElement("header",{className:"App-hero",style:{minHeight:"100vh",backgroundImage:a,color:"white"}},r.a.createElement(de.Helmet,null,r.a.createElement("title",null,"Engin.AI - AI Consulting Services"),r.a.createElement("meta",{name:"description",content:"At Engin.AI we help clients at all levels of AI adoption. We provide consulting in data collection strategy, data curation, AI strategy, AI implementation and deployment"}),r.a.createElement("meta",{property:"og:title",content:"Engin.AI - AI Consulting | Data Strategy | AI Strategy"}),r.a.createElement("meta",{property:"og:type",content:"website"}),r.a.createElement("meta",{property:"og:url",content:"https://www.engin.ai"}),r.a.createElement("meta",{property:"og:description",content:"At Engin.AI we help clients at all levels of AI adoption. We provide consulting in data collection strategy, data curation, AI strategy, AI implementation and deployment"}),r.a.createElement("meta",{name:"keywords",content:"engin ai, enginai, engin.ai, AI consulting services, AI solutions, computer vision, deep learning, data collection, data strategy, ai strategy, ai deployment"}),r.a.createElement("meta",{name:"robots",content:"index, follow"}),r.a.createElement("meta",{"http-equiv":"Content-Type",content:"text/html; charset=utf-8"}),r.a.createElement("meta",{name:"language",content:"English"}),r.a.createElement("meta",{name:"author",content:"Javier Urbina"}),r.a.createElement("meta",{property:"og:image",content:"%PUBLIC_URL%/full-color-logo-only-01-01.png"})),r.a.createElement(d.a,{basic:!0,style:{width:"70%",zIndex:"10"},className:"cta-hero-section"},r.a.createElement(G.a,{stackable:!0},r.a.createElement(G.a.Row,{columns:2},r.a.createElement(G.a.Column,{style:{textAlign:"left"}},r.a.createElement("h1",{style:{textTransform:"uppercase"}},t?"Consultor\xeda en AI":"AI Consulting"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",{style:{lineHeight:"1.5"}},t?"\xbfQuisiera potenciar su empresa con soluciones personalizads? Nuestros consultores le pueden ayudar a crear soluciones para sus necesidades operacionales y de negocios.":"Would you like to find custom AI solutions for your company? Our AI consultants will work with you to create taylor-made solutions to your business and operational needs."),r.a.createElement("br",null)),r.a.createElement(G.a.Column,null,r.a.createElement(d.a,null,r.a.createElement(se.a,{style:{color:"black"},action:"https://formspree.io/engin.ai.solutions@gmail.com",method:"POST"},r.a.createElement("h2",null,t?"Solicite una Asesor\xeda Inicial Gratuita":"Request a Free Initial Assessment"),r.a.createElement(d.a,{basic:!0,style:{textAlign:"left"}},r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"user_name"},"Name"),r.a.createElement(he.a,{name:"name",id:"user_name",placeholder:"John Doe"})),r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement(he.a,{required:!0,name:"name",id:"email",placeholder:"jdoe@example.com"})),r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"company"},"Company"),r.a.createElement(he.a,{name:"name",id:"company",placeholder:"My Business"})),r.a.createElement(se.a.Field,null,r.a.createElement("label",{htmlFor:"comment"},"Comment"),r.a.createElement(ge.a,{name:"name",id:"comment"}))),r.a.createElement(q.a,{type:"submit",color:"red",size:"huge",syle:{width:"50%"}},t?r.a.createElement("span",{className:"buttonText"},"Cont\xe1ctenos"):r.a.createElement("span",null,"Contact Us"),r.a.createElement("span",{className:"iconContainer",style:{display:"inline-block",width:"10px"}},r.a.createElement(B.a,{name:"chevron right"})))))))),r.a.createElement(y.HashLink,{to:"/#contact-us"})))},xe=a(38),je=a(121),Oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={acceptedFiles:[],images:[],arrayBuffers:[],loading:!1,detection:null,type:null,confidence:null,length:null,width:null,imgSize:null},n.handleDrop=n.handleDrop.bind(Object(ve.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"handleDrop",value:function(e){this.setState({acceptedFiles:e})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({loading:!0}),this.state.acceptedFiles.forEach(function(e){var a=new FormData;a.append("image",e),O.a.post("".concat("http://localhost:8081","/api/images/uploads"),a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log(e),e.data.data.image&&e.data.data.detection_img_url&&t.setState({images:[].concat(Object(xe.a)(t.state.images),[e.data.data.image]),detection:e.data.data.detection_img_url,confidence:e.data.data.damage.confidence,length:e.data.data.damage.length,width:e.data.data.damage.name,imgSize:e.data.data.imgsize}),e.data.data.image&&t.setState({images:[].concat(Object(xe.a)(t.state.images),[e.data.data.image])})}).catch(function(e){console.log(e)}).finally(function(){t.setState({loading:!1})})})}},{key:"render",value:function(){var e=this,t=this.props.browserLang||"en";console.log("http://localhost:8081");var a=this.state.acceptedFiles.map(function(e){return"name"in e?r.a.createElement("p",null,e.name):"path"in e?r.a.createElement("p",null,e.path):r.a.createElement("p",null,"no-name")}),l=this.state.images.map(function(e){return r.a.createElement(h.a,{src:e,size:"medium"})});return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-hero",style:{minHeight:"75px",backgroundImage:"linear-gradient(45deg, rgb(229, 44, 78) 1%, rgb(233, 74, 99) 30%, rgb(174, 82, 157) 69%, rgb(154, 85, 177) 100%)",color:"white"}}),r.a.createElement(W.a,{style:{paddingTop:"16px"}},r.a.createElement(G.a,null,r.a.createElement(G.a.Row,{columns:2},r.a.createElement(G.a.Column,{style:{textAlign:"left"}},r.a.createElement(G.a.Row,null,r.a.createElement("h1",null,"en"===t?"Select Photo":"Seleccionar Foto")),r.a.createElement(G.a.Row,null,r.a.createElement(je.a,{onDrop:function(t){return e.handleDrop(t)}},function(e){var a=e.getRootProps,n=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",Object.assign({className:"dropzone"},a()),r.a.createElement("input",n()),r.a.createElement("p",null,"en"===t?"Drag 'n' drop some files here, or click to select files":"Arrastra los archivos aqu\xed, o haz click para seleccionar archivo")))})),r.a.createElement(G.a.Row,null,r.a.createElement("h1",null,"en"===t?"Selected Files":"Archivos seleccionados")),r.a.createElement(G.a.Row,null,r.a.createElement(d.a,null,a)),r.a.createElement(V.a,null),r.a.createElement(G.a.Row,null,r.a.createElement(q.a,{loading:this.state.loading,color:"red",disabled:this.state.acceptedFiles.length<1,onClick:this.handleSubmit},"en"===t?"Submit":"Enviar"))),r.a.createElement(G.a.Column,null,l)))))}}]),a}(r.a.Component),Se=a(645),Ie=a(664),De=a(350),Re=a.n(De),Ae=a(224),Le=a(177),Fe=a(13),Ne=a.n(Fe),_e=a(64),Pe=a(24),Te=a(42),Ue=function(e){var t=e.browserLang||"en",a=e.userId?e.userId:null,l=e.foldername?e.foldername:"",i=e.files?e.files:[],o=Object(n.useState)(!1),c=Object(Te.a)(o,2),s=c[0],u=c[1],m=e.fileDataArr?e.fileDataArr:null;console.log("fileDataArr",m);var d=function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var n,r,o,c,s,d,p;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u(!0),m){n=Object(_e.a)(m);try{for(o=function(){var e=r.value,t=[];if(e.data.length>1){e.data.forEach(function(e,a){var n=e.join(",");t.push(n)});var a=t.join("\n"),n=new File([a],"".concat(e.filename,".csv"),{type:"text/csv",lastModified:new Date});i.push(n)}},n.s();!(r=n.n()).done;)o()}catch(t){n.e(t)}finally{n.f()}}c=new FormData,s=Object(_e.a)(i);try{for(s.s();!(d=s.n()).done;)p=d.value,c.append("image",p)}catch(t){s.e(t)}finally{s.f()}return c.append("userid",a),c.append("foldername",l),c.append("largeFilesExpected",JSON.stringify(!1)),e.next=11,I("POST","".concat("http://localhost:8081","/api/images/uploads/drive/bulk"),c);case 11:e.sent,u(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),u(!1);case 19:case"end":return e.stop()}},e,null,[[0,15]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(q.a,{loading:s,color:"teal",onClick:d},"en"===t?"Save":"Guardar"))},He=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={acceptedFiles:[],images:[],arrayBuffers:[],loading:!1,detection:null,type:null,confidence:null,length:null,width:null,imgSize:null,parsedCsvData:null,withHeaders:!0,withImages:!1,headers:[],imagesColumn:null,secondImageColumn:null,maxRowCount:10,startingRow:1,selectedRow:[],selectedRowIdx:0,nameCol:0,damageCol:1,qaGenerated:[],classificationGenerated:[],feedbackGenerated:[],usage:[{value:"qa",text:"Quality Assurance"},{value:"quick-classification",text:"Quick Classification"},{value:"visual",text:"Only Visualize"},{value:"feedback",text:"Feedback"}],objective:"visual",qaDamageDetectedCorrectly:!0,qaCorrectedDamage:"none",classificationIsDamaged:!1,classificationDamageName:"none",feedbackImageHasDamage:!1,feedbackDamageName1:"none",feedbackDamageName2:"none",feedbackDamageName3:"none",feedbackDamage1Length:0,feedbackDamage2Length:0,feedbackDamage3Length:0,feedbackDamage1Width:0,feedbackDamage2Width:0,feedbackDamage3Width:0,feedbackComments:"",disableAdd:!1,twoImages:!1,startingRowCustomize:1},n.handleDrop=n.handleDrop.bind(Object(ve.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(ve.a)(n)),n.handleChange=n.handleChange.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"handleDrop",value:function(e){var t=this;console.log(e);var a=new FileReader,n=[];a.onabort=function(){return console.log("file reading was aborted")},a.onerror=function(){return console.log("file reading failed")},a.onload=function(){Re.a.parse(a.result,function(e,a){if(a&&"length"in a&&a.length){var n=a[0].map(function(e,a){return t.state.withHeaders?e:a});t.setState({parsedCsvData:t.state.withHeaders?a:[n].concat(Object(xe.a)(a)),headers:n,qaGenerated:[[].concat(Object(xe.a)(n),["damage_detected_correctly","corrected_damage"])].concat(Object(xe.a)(t.state.qaGenerated)),classificationGenerated:[[].concat(Object(xe.a)(n),["has_damage","damage_type"])].concat(Object(xe.a)(t.state.qaGenerated)),feedbackGenerated:[[].concat(Object(xe.a)(n),["damage_1_type","damage_1_length","damage_1_width","damage_2_type","damage_2_length","damage_2_width","damage_3_type","damage_3_length","damage_3_width","comments"])].concat(Object(xe.a)(t.state.qaGenerated))})}})},e.forEach(function(e){console.log("file",e);var t=a.readAsBinaryString(e);console.log("parsed file",t),n.push(t)}),ue.a.event({category:"Visualization Tool",action:"File Upload",label:"File upload success"}),this.setState({acceptedFiles:e,arrayBuffers:n})}},{key:"handleChange",value:function(e,t){this.setState(Object(Ee.a)({},t.name,t.value))}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),this.setState({loading:!0}),"qa"===this.state.objective){ue.a.event({category:"Visualization Tool",action:"Row added to QA CSV",label:"Submitted new row to QA CSV"});var t=!!this.state.qaDamageDetectedCorrectly&&this.state.qaDamageDetectedCorrectly,a=this.state.qaCorrectedDamage,n=[].concat(Object(xe.a)(this.state.selectedRow),[t,a]),r=[].concat(Object(xe.a)(this.state.qaGenerated),[n]);this.setState({qaGenerated:r,loading:!1,qaDamageDetectedCorrectly:!0,qaCorrectedDamage:"",disableAdd:!0})}else if("quick-classification"===this.state.objective){ue.a.event({category:"Visualization Tool",action:"Row added to Quick Classification CSV",label:"Submitted new row to Quick Classification CSV"});var l=!!this.state.classificationIsDamaged&&this.state.classificationIsDamaged,i=l?this.state.classificationDamageName:"None",o=[].concat(Object(xe.a)(this.state.selectedRow),[l,i]),c=[].concat(Object(xe.a)(this.state.classificationGenerated),[o]);this.setState({classificationGenerated:c,loading:!1,classificationIsDamaged:!1,disableAdd:!0})}else if("feedback"===this.state.objective){ue.a.event({category:"Visualization Tool",action:"Row added to Feedback CSV",label:"Submitted new row to Feedback CSV"});var s=!!this.state.feedbackImageHasDamage&&this.state.feedbackImageHasDamage,u=s?this.state.feedbackDamageName1:"None",m=s?this.state.feedbackDamage1Length:0,d=s?this.state.feedbackDamage1Width:0,p=s?this.state.feedbackDamageName2:"None",h=s?this.state.feedbackDamage2Length:0,g=s?this.state.feedbackDamage2Width:0,f=s?this.state.feedbackDamageName3:"None",E=s?this.state.feedbackDamage3Length:0,v=s?this.state.feedbackDamage3Width:0,b=s?this.state.feedbackComments:"",y=[].concat(Object(xe.a)(this.state.selectedRow),[u,m,d,p,h,g,f,E,v,b]),w=[].concat(Object(xe.a)(this.state.feedbackGenerated),[y]);this.setState({feedbackGenerated:w,loading:!1,feedbackImageHasDamage:!1,disableAdd:!0,feedbackDamageName1:"none",feedbackDamageName2:"none",feedbackDamageName3:"none",feedbackDamage1Length:0,feedbackDamage2Length:0,feedbackDamage3Length:0,feedbackDamage1Width:0,feedbackDamage2Width:0,feedbackDamage3Width:0,feedbackComments:""})}}},{key:"render",value:function(){var e=this,t=this.props.currentUser?this.props.currentUser:null,a=this.props.browserLang||"en",l=this.state.twoImages?4:8,i=this.state.twoImages?12:8,o=[],c=this.state.usage.map(function(e){return"en"===a?{text:e.text,value:e.value}:"qa"===e.value?{text:"Aseguramiento de Calidad",value:e.value}:"quick-classification"===e.value?{text:"Clasificaci\xf3n R\xe1pida",value:e.value}:"feedback"===e.value?{text:"Retroalimentaci\xf3n",value:e.value}:{text:"Visualizaci\xf3n",value:e.value}}),s=this.state.headers.map(function(e,t){return{text:e,value:t}}),u=this.state.acceptedFiles.map(function(e){return"name"in e?r.a.createElement("p",{key:e.name},e.name):"path"in e?r.a.createElement("p",{key:e.path},e.path):r.a.createElement("p",{key:"no-name"},"no-name")}),m=this.state.images.map(function(e,t){return r.a.createElement(Ae.Magnifier,{key:t,style:{maxWidth:"700px"},imageSrc:e,imageAlt:"image",mouseActivation:"click",touchActivation:"tap"})});return this.state.parsedCsvData&&"length"in this.state.parsedCsvData&&(o=this.state.parsedCsvData.slice(this.state.startingRow,this.state.startingRow+this.state.maxRowCount)),r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-hero",style:{minHeight:"75px",backgroundImage:"linear-gradient(45deg, rgb(229, 44, 78) 1%, rgb(233, 74, 99) 30%, rgb(174, 82, 157) 69%, rgb(154, 85, 177) 100%)",color:"white"}}),r.a.createElement("div",{style:{paddingTop:"16px",marginLeft:"40px",marginRight:"40px"}},r.a.createElement(G.a,{stackable:!0},r.a.createElement(G.a.Row,{columns:2},r.a.createElement(G.a.Column,{width:l,style:{textAlign:"left"}},r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,"en"===a?"Select Files (Only CSV)":"Seleccionar Archivo (Solo CSV)")),r.a.createElement(G.a.Row,null,r.a.createElement(je.a,{onDrop:function(t){return e.handleDrop(t)}},function(e){var t=e.getRootProps,n=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",Object.assign({className:"dropzone"},t()),r.a.createElement("input",n()),r.a.createElement("p",null,"en"===a?"Drag 'n' drop some files here, or click to select files":"Arrastra los archivos aqu\xed, o haz click para seleccionar archivo")))})),r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,"en"===a?"Selected Files":"Archivos seleccionados")),r.a.createElement(G.a.Row,null,r.a.createElement(d.a,null,u)),r.a.createElement(V.a,null),r.a.createElement("h2",null,"en"===a?"Configure Usage of This Tool":"Configurar Uso de la Herramienta"),r.a.createElement(G.a.Row,null,r.a.createElement(g.a,{search:!0,options:c,selection:!0,placeholder:"en"===a?"What do you want to accomplish with this tool?":"\xbfCu\xe1l es tu objectivo?",onChange:function(t,a){e.setState({objective:a.value})}})),r.a.createElement(V.a,null),r.a.createElement("h2",null,"en"===a?"Configure Visualization":"Configurar Visualizaci\xf3n"),r.a.createElement(G.a.Row,null,r.a.createElement(Se.a,{checked:this.state.withHeaders,onChange:function(t,a){e.setState({withHeaders:!e.state.withHeaders})},label:"en"===a?"Data has headers":"Las columnas tienen encabezados",toggle:!0})),r.a.createElement(V.a,{hidden:!0}),r.a.createElement(G.a.Row,null,r.a.createElement(Se.a,{checked:this.state.withImages,onChange:function(t,a){e.setState({withImages:!e.state.withImages})},label:"en"===a?"Has Images?":"\xbfHay im\xe1genes?",toggle:!0})),this.state.parsedCsvData&&this.state.parsedCsvData.length>0&&this.state.withImages&&r.a.createElement(n.Fragment,null,r.a.createElement(V.a,null),r.a.createElement("p",null," ","en"===a?"Select column that specifies image URL":"Selecciona la columna que especifica el URL de las im\xe1genes"),r.a.createElement(g.a,{search:!0,onChange:function(t,a){e.setState({imagesColumn:a.value})},placeholder:"en"===a?"Select column that specifies image URL":"Selecciona la columna que especifica el URL de las im\xe1genes",fluid:!0,label:"en"===a?"Select column that specifies image URL":"Selecciona la columna que especifica el URL de las im\xe1genes",selection:!0,options:s}),r.a.createElement(V.a,null),r.a.createElement("h3",null,"Configure second image"),r.a.createElement(G.a.Row,null,r.a.createElement(Se.a,{name:"twoImages",checked:this.state.twoImages,onChange:function(t,a){e.setState({twoImages:!e.state.twoImages})},label:"en"===a?"Visualize 2 images?":"\xbfVer 2 im\xe1genes?",toggle:!0})),this.state.twoImages&&r.a.createElement(n.Fragment,null,r.a.createElement(V.a,{hidden:!0}),r.a.createElement("p",null," ","en"===a?"Select column that specifies image URL of the second image":"Selecciona la columna que especifica el URL de las im\xe1genes 2"),r.a.createElement(g.a,{name:"secondImageColumn",search:!0,onChange:this.handleChange,placeholder:"en"===a?"Select column that specifies image URL":"Selecciona la columna que especifica el URL de las im\xe1genes",fluid:!0,label:"en"===a?"Select column that specifies image URL":"Selecciona la columna que especifica el URL de las im\xe1genes",selection:!0,options:s})),r.a.createElement(V.a,null),r.a.createElement("p",null,"en"===a?"Column with image name":"Columna con nombre de la imagen"),r.a.createElement(g.a,{onChange:function(t,a){e.setState({nameCol:a.value})},search:!0,placeholder:"en"===a?"Column with image name":"Columna con nombre de la imagen",fluid:!0,label:"en"===a?"Column with image name":"Columna con nombre de la imagen",selection:!0,options:s}),r.a.createElement(V.a,null),r.a.createElement("p",null,"en"===a?"Column with damage name":"Columna con nombre del da\xf1o"),r.a.createElement(g.a,{search:!0,onChange:function(t,a){e.setState({damageCol:a.value})},placeholder:"en"===a?"Column with damage name":"Columna con nombre del da\xf1o",label:"en"===a?"Column with damage name":"Columna con nombre del da\xf1o",fluid:!0,selection:!0,options:s})),r.a.createElement(V.a,{hidden:!0})),r.a.createElement(G.a.Column,{width:i},this.state.withImages&&r.a.createElement(d.a,{style:{position:"fixed",zIndex:"2",overflowY:"scroll",maxHeight:"88vh"}},r.a.createElement("h2",null,"en"===a?"Visualization":"Visualizaci\xf3n"),r.a.createElement(G.a,null,r.a.createElement(G.a.Row,{columns:this.state.twoImages?2:1},m.map(function(e,t){return r.a.createElement(G.a.Column,{key:t},e)}))),this.state.parsedCsvData&&this.state.parsedCsvData.length>1&&this.state.selectedRow&&r.a.createElement(n.Fragment,null,r.a.createElement(V.a,null),r.a.createElement("p",null,"Image name: ",this.state.selectedRow[this.state.nameCol]),r.a.createElement("p",null,"Damage: ",this.state.selectedRow[this.state.damageCol])),this.state.parsedCsvData&&this.state.parsedCsvData.length>1&&this.state.selectedRow&&"qa"===this.state.objective&&r.a.createElement(n.Fragment,null,r.a.createElement(V.a,null),r.a.createElement("p",null,"en"===a?"Is the damage correctly identified?":"\xbfSe identific\xf3 el da\xf1o de forma correcta?"),r.a.createElement(G.a.Row,null,r.a.createElement(g.a,{search:!0,name:"qaDamageDetectedCorrectly",onChange:this.handleChange,selection:!0,value:this.state.qaDamageDetectedCorrectly,options:[{text:"en"===a?"Yes":"Si",value:!0},{text:"No",value:!1}]})),!1===this.state.qaDamageDetectedCorrectly&&r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"en"===a?"What's the correct damage?":"\xbfCu\xe1l es el da\xf1o correcto?"),r.a.createElement(he.a,{name:"qaCorrectedDamage",onChange:this.handleChange,value:this.state.qaCorrectedDamage})),r.a.createElement(V.a,{hidden:!0}),r.a.createElement(G.a.Row,null,r.a.createElement(q.a,{disabled:this.state.disableAdd,loading:this.state.loading,onClick:this.handleSubmit,positive:!0},"en"===a?"Add to new list":"Agregar a lista nueva"))),this.state.parsedCsvData&&this.state.parsedCsvData.length>1&&this.state.selectedRow&&"quick-classification"===this.state.objective&&r.a.createElement(n.Fragment,null,r.a.createElement(V.a,null),r.a.createElement("p",null,"en"===a?"Is there a damage?":"\xbfSe identifica un da\xf1o?"),r.a.createElement(G.a.Row,null,r.a.createElement(g.a,{search:!0,name:"classificationIsDamaged",onChange:this.handleChange,selection:!0,value:this.state.classificationIsDamaged,options:[{text:"en"===a?"Yes":"Si",value:!0},{text:"No",value:!1}]})),!0===this.state.classificationIsDamaged&&r.a.createElement(n.Fragment,null,r.a.createElement("p",null,"en"===a?"What's the damage?":"\xbfCu\xe1l es el da\xf1o?"),r.a.createElement(he.a,{name:"classificationDamageName",onChange:this.handleChange,value:this.state.classificationDamageName})),r.a.createElement(V.a,{hidden:!0}),r.a.createElement(G.a.Row,null,r.a.createElement(q.a,{disabled:this.state.disableAdd,loading:this.state.loading,onClick:this.handleSubmit,positive:!0},"en"===a?"Add to new list":"Agregar a lista nueva"))),this.state.parsedCsvData&&this.state.parsedCsvData.length>1&&this.state.selectedRow&&"feedback"===this.state.objective&&r.a.createElement(n.Fragment,null,r.a.createElement(V.a,null),r.a.createElement("p",null,"en"===a?"Is there a damage?":"\xbfSe identifica un da\xf1o?"),r.a.createElement(G.a.Row,null,r.a.createElement(g.a,{search:!0,name:"feedbackImageHasDamage",onChange:this.handleChange,selection:!0,value:this.state.feedbackImageHasDamage,options:[{text:"en"===a?"Yes":"Si",value:!0},{text:"No",value:!1}]})),!0===this.state.feedbackImageHasDamage&&r.a.createElement(n.Fragment,null,r.a.createElement(G.a,null,r.a.createElement(G.a.Row,{columns:"equal"},r.a.createElement(G.a.Column,null,r.a.createElement("p",null,"en"===a?"Damage 1":"Da\xf1o 1"),r.a.createElement(he.a,{name:"feedbackDamageName1",onChange:this.handleChange,value:this.state.feedbackDamageName1})),r.a.createElement(G.a.Column,null,r.a.createElement("p",null,"en"===a?"Length (m) 1":"Longitud (m) 1"),r.a.createElement(he.a,{name:"feedbackDamage1Length",onChange:this.handleChange,value:this.state.feedbackDamage1Length})),r.a.createElement(G.a.Column,null,r.a.createElement("p",null,"en"===a?"Width (m) 1":"Ancho (m) 1"),r.a.createElement(he.a,{name:"feedbackDamage1Width",onChange:this.handleChange,value:this.state.feedbackDamage1Width}))),r.a.createElement(G.a.Row,{columns:"equal"},r.a.createElement(G.a.Column,null,r.a.createElement("p",null,"en"===a?"Damage 2":"Da\xf1o 2"),r.a.createElement(he.a,{name:"feedbackDamageName2",onChange:this.handleChange,value:this.state.feedbackDamageName2})),r.a.createElement(G.a.Column,null,r.a.createElement("p",null,"en"===a?"Length (m) 2":"Longitud (m) 2"),r.a.createElement(he.a,{name:"feedbackDamage2Length",onChange:this.handleChange,value:this.state.feedbackDamage2Length})),r.a.createElement(G.a.Column,null,r.a.createElement("p",null,"en"===a?"Width (m) 2":"Ancho (m) 2"),r.a.createElement(he.a,{name:"feedbackDamage2Width",onChange:this.handleChange,value:this.state.feedbackDamage2Width}))),r.a.createElement(G.a.Row,{columns:"equal"},r.a.createElement(G.a.Column,null,r.a.createElement("p",null,"en"===a?"Damage 3":"Da\xf1o 3"),r.a.createElement(he.a,{name:"feedbackDamageName3",onChange:this.handleChange,value:this.state.feedbackDamageName3})),r.a.createElement(G.a.Column,null,r.a.createElement("p",null,"en"===a?"Length (m) 3":"Longitud (m) 3"),r.a.createElement(he.a,{name:"feedbackDamage3Length",onChange:this.handleChange,value:this.state.feedbackDamage3Length})),r.a.createElement(G.a.Column,null,r.a.createElement("p",null,"en"===a?"Width (m) 3":"Ancho (m) 3"),r.a.createElement(he.a,{name:"feedbackDamage3Width",onChange:this.handleChange,value:this.state.feedbackDamage3Width}))),r.a.createElement(G.a.Row,{columns:"equal"},r.a.createElement(G.a.Column,null,r.a.createElement(se.a,null,r.a.createElement("p",null,"en"===a?"Comments":"Comentarios"),r.a.createElement(ge.a,{placeholder:"en"===a?"Comments":"Comentarios",label:"en"===a?"Comments":"Comentarios",name:"feedbackComments",onChange:this.handleChange,value:this.state.feedbackComments})))))),r.a.createElement(V.a,{hidden:!0}),r.a.createElement(G.a.Row,null,r.a.createElement(q.a,{disabled:this.state.disableAdd,loading:this.state.loading,onClick:this.handleSubmit,positive:!0},"en"===a?"Add to new list":"Agregar a lista nueva"))),r.a.createElement(V.a,null),t&&"user"in t&&"id"in t.user&&t.user.id&&r.a.createElement(n.Fragment,null,r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,"en"===a?"Save To Google Drive":"Guardar A Google Drive")),r.a.createElement(G.a.Row,null,r.a.createElement(Ue,{browserLang:a,userId:t.user.id,fileDataArr:[{filename:"engin-ai-qa-export",data:this.state.qaGenerated,type:"csv"},{filename:"engin-ai-classification-export",data:this.state.classificationGenerated,type:"csv"},{filename:"engin-ai-feedback-export",data:this.state.feedbackGenerated,type:"csv"}]})),r.a.createElement(V.a,{hidden:!0})),r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,"en"===a?"Download":"Descarga")),this.state.qaGenerated.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement(G.a.Row,null,r.a.createElement("p",null,"en"===a?"Quality Assurance":"Aseguramiento de Calidad")),r.a.createElement(G.a.Row,null,r.a.createElement(Le.CSVLink,{filename:"engin-ai-qa-export.csv",data:this.state.qaGenerated},"en"===a?"Download QA document":"Descargar documento QA")),r.a.createElement(V.a,{hidden:!0})),this.state.classificationGenerated.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement(G.a.Row,null,r.a.createElement("p",null,"en"===a?"Quick Classification":"Clasificaci\xf3n R\xe1pida")),r.a.createElement(G.a.Row,null,r.a.createElement(Le.CSVLink,{filename:"engin-ai-classification-export.csv",data:this.state.classificationGenerated},"en"===a?"Download Classification document":"Descargar documento clasificado"))),this.state.feedbackGenerated.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement(G.a.Row,null,r.a.createElement("p",null,"en"===a?"Feedback":"Retroalimentaci\xf3n")),r.a.createElement(G.a.Row,null,r.a.createElement(Le.CSVLink,{filename:"engin-ai-feedback-export.csv",data:this.state.feedbackGenerated},"en"===a?"Download feedback document":"Descargar documento de retroalimentaci\xf3n")))))),this.state.parsedCsvData&&"length"in this.state.parsedCsvData&&r.a.createElement(n.Fragment,null,r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,"en"===a?"Table Controllers":"Controladores de tabla")),r.a.createElement(G.a.Row,null,r.a.createElement(q.a,{color:"blue",onClick:function(){e.setState({startingRow:1})}},"Start"),r.a.createElement(q.a,{color:"yellow",onClick:function(){var t=e.state.startingRow-e.state.maxRowCount;t>1&&e.setState({startingRow:t})}},"Previous"),r.a.createElement(q.a,{color:"green",onClick:function(){var t=e.state.startingRow+e.state.maxRowCount;t<e.state.parsedCsvData.length&&e.setState({startingRow:t})}},"Next"),r.a.createElement(q.a,{color:"blue",onClick:function(){e.setState({startingRow:e.state.parsedCsvData.length-e.state.maxRowCount})}},"End")),r.a.createElement(G.a.Row,null,r.a.createElement("p",null,"en"===a?"Count":"Cuenta")),r.a.createElement(G.a.Row,null,r.a.createElement("p",null,"".concat(this.state.startingRow," - ").concat(this.state.maxRowCount+this.state.startingRow,"/").concat(this.state.parsedCsvData.length))),r.a.createElement(G.a.Row,null,r.a.createElement(he.a,{type:"number",value:this.state.startingRowCustomize,name:"startingRowCustomize",onChange:function(t,a){e.setState({startingRowCustomize:parseInt(a.value,10)})},placeholder:"en"===a?"Customize Starting Row":"Personaliza la fila de inicio",label:"en"===a?"Customize Starting Row":"Personaliza la fila de inicio",icon:r.a.createElement(B.a,{name:"search",inverted:!0,circular:!0,link:!0,onClick:function(){e.state.startingRowCustomize<=e.state.parsedCsvData.length&&e.state.startingRowCustomize>0&&e.setState({startingRow:e.state.startingRowCustomize})}})})),r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Column,{width:l,style:{overflowX:"scroll"}},r.a.createElement(Ie.a,{color:"purple",headerRow:this.state.headers,compact:!0,selectable:!0,tableData:o,renderBodyRow:function(t,a){var n=t.map(function(e,t){return r.a.createElement(Ie.a.Cell,{key:t},e)});return r.a.createElement(Ie.a.Row,{key:a,style:{cursor:"pointer",color:a===e.state.selectedRowIdx?"red":"black",background:a===e.state.selectedRowIdx?"whitesmoke":"white"},onClick:function(){if(e.state.withImages&&e.state.imagesColumn){var n=[t[e.state.imagesColumn]];e.state.twoImages&&(n=[].concat(Object(xe.a)(n),[t[e.state.secondImageColumn]])),e.setState({images:n,selectedRow:t,disableAdd:!1,selectedRowIdx:a})}}},n)}})))))))}}]),a}(r.a.Component),ze=a(662),Me=a(660),qe=a(351),Be=a.n(qe),We=function(e){var t=e.browserLang,a=(e.uploads?e.uploads:[]).map(function(e,t){if(e){var a=Math.floor(e.uploadedFileCount/e.numFiles*100);return r.a.createElement(Ie.a.Row,{key:t},r.a.createElement(Ie.a.Cell,null,Be()(e.createdAt).format("MMM DD YYYY")),r.a.createElement(Ie.a.Cell,null,e.customFolderName),r.a.createElement(Ie.a.Cell,null,e.numFiles),r.a.createElement(Ie.a.Cell,null,r.a.createElement(Me.a,{percent:a,indicating:!0,progress:!0})),r.a.createElement(Ie.a.Cell,null,"".concat((e.uploadSizeBytes/1e9).toFixed(2)>1?"".concat((e.uploadSizeBytes/1e9).toFixed(2)," GB"):"".concat((e.uploadSizeBytes/1e6).toFixed(2)," MB"))))}});return r.a.createElement(Ie.a,{celled:!0},r.a.createElement(Ie.a.Header,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.HeaderCell,null,"en"===t?"Upload date":"Fecha de Carga"),r.a.createElement(Ie.a.HeaderCell,null,"en"===t?"Folder Name":"Nombre de Carpeta"),r.a.createElement(Ie.a.HeaderCell,null,"en"===t?"Number of Files":"N\xfamero de Archivos"),r.a.createElement(Ie.a.HeaderCell,null,"en"===t?"Progress":"Progreso"),r.a.createElement(Ie.a.HeaderCell,null,"en"===t?"Size":"Tama\xf1o"))),r.a.createElement(Ie.a.Body,null,a))},Ge=a(120),Ve=a.n(Ge),$e=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var t=n.props.signUp?"signup":"signin";if(n.props.signUp){if(n.state.password!==n.state.password_confirm)return void n.setState({error:!0,errorMsg:"Your passwords don't match. Try again"});e.target.reset()}if(""!==n.state.a_password)return ue.a.event({category:"Fake Sign Up",action:"Captcha triggered"}),void n.setState({error:!0,errorMsg:"Your sign up is suspicious. Please try again later"});"signup"===t&&S("POST","".concat("http://localhost:8081","/api/admin/").concat(n.props.adminUserId?n.props.adminUserId:"","/users"),{email:n.state.email.toLowerCase().trim(),password:n.state.password.trim(),f_name:n.state.f_name,l_name:n.state.l_name,profileImageUrl:n.state.profileImageUrl,company:n.state.company}).then(function(e){ue.a.event({category:"Sign Up",action:"User Has Been Created"}),n.props.history.push("/dashboard"),n.setState({loading:!1,message:e.message,email:"",password:"",profileImageUrl:"",f_name:"",l_name:"",password_confirm:"",agreedToTerms:!1,a_password:"",company:""}),setTimeout(function(){n.setState({message:"",error:""})},3e3)}).catch(function(e){n.setState({loading:!1,errorMsg:e,email:"",password:"",profileImageUrl:"",f_name:"",l_name:"",password_confirm:"",agreedToTerms:!1,a_password:"",company:""}),setTimeout(function(){n.setState({message:"",error:""})},3e3)})},n.handleChange=function(e){n.setState(Object(Ee.a)({},e.target.name,e.target.value))},n.handleDropdownChange=function(e,t){n.setState(Object(Ee.a)({},t.name,t.value))},n.state={email:"",password:"",profileImageUrl:"",f_name:"",l_name:"",password_confirm:"",error:!1,errorMsg:"",agreedToTerms:!1,a_password:"",company:"",loading:!1,message:"",companyList:[]},n.onCheckboxSelect=n.onCheckboxSelect.bind(Object(ve.a)(n)),n.handleDropdownChange=n.handleDropdownChange.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t,a;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S("GET","".concat("http://localhost:8081","/api/admin/").concat(this.props.adminUserId?this.props.adminUserId:"","/companies"));case 3:t=e.sent,a=Object.keys(t).map(function(e){return{text:e,value:e}}),this.setState({companyList:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"onCheckboxSelect",value:function(){this.setState({agreedToTerms:!this.state.agreedToTerms})}},{key:"render",value:function(){var e=this,t=this.state,a=t.email,n=t.password,l=t.f_name,i=t.l_name,o=t.password_confirm,c=t.a_password,s=this.props,u=s.signUp,m=s.heading,d=s.buttonText,p=s.errors,h=s.history,g=this.props.language;h.listen(function(){e.setState({error:null})});var f=!!this.props.removeAdditionalField&&this.props.removeAdditionalField,E=this.props.customWidth?this.props.customWidth:"50%";return r.a.createElement("div",null,r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"ui container"},r.a.createElement("div",{className:"ui one column centered grid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"ui segments",id:"authform",style:{width:E}},r.a.createElement("div",{className:"ui segment"},r.a.createElement("h1",null,m),p.message&&r.a.createElement(be.a,{error:!0,content:p.message}),this.state.error&&""!==this.state.errorMsg&&r.a.createElement(be.a,{error:!0,content:this.state.errorMsg}),""!==this.state.message&&r.a.createElement(be.a,{success:!0,content:this.state.message})),r.a.createElement("div",{className:"ui left aligned segment"},r.a.createElement("div",{className:"ui form registerForm"},r.a.createElement(se.a,{error:this.state.error,onSubmit:this.handleSubmit},r.a.createElement("div",{style:{display:"none"}},r.a.createElement(se.a.Input,{style:{display:"none"},required:!1,alt:"Please leave this field empty",tabIndex:"-1",autoComplete:"somepassword",id:"a_password",name:"a_password",onChange:this.handleChange,value:c,placeholder:"**********"})),u&&r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"en"===g?"First Name":"Nombre",autoComplete:"off",id:"f_name",name:"f_name",onChange:this.handleChange,type:"text",value:l,placeholder:"John"}),r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"en"===g?"Last Name":"Apellido",autoComplete:"off",id:"l_name",name:"l_name",onChange:this.handleChange,type:"text",value:i,placeholder:"Doe"})),r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Dropdown,{required:!0,label:"en"===g?"Company":"Empresa",autoComplete:"off",id:"company",name:"company",onChange:this.handleDropdownChange,options:this.state.companyList,value:this.state.company,placeholder:"Engin.AI"}))),r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"Email",autoComplete:"off",id:"email",name:"email",onChange:this.handleChange,type:"email",value:a,placeholder:"johndoe@engin-ai.com"})),r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"en"===g?"Password":"Contrase\xf1a",autoComplete:"off",id:"password",name:"password",onChange:this.handleChange,type:"password",value:n,placeholder:"**********"})),u&&r.a.createElement("div",{className:"required field"},r.a.createElement(se.a.Input,{required:!0,label:"en"===g?"Confirm password":"Confirma la Contrase\xf1a",autoComplete:"off",id:"password_confirm",name:"password_confirm",onChange:this.handleChange,type:"password",value:o,placeholder:"**********"})),u&&r.a.createElement(se.a.Field,{required:!0},r.a.createElement("div",{className:"ui checkbox"},r.a.createElement("input",{checked:this.state.agreedToTerms,onChange:this.onCheckboxSelect,required:!0,type:"checkbox",name:"agree"}),r.a.createElement("label",null,r.a.createElement("span",null,"en"===g?"I accept the":"Acepto los"," ",r.a.createElement("a",{href:"/terms-of-use"},"en"===g?"Terms and Conditions":"T\xe9rminos y Condiciones")," ","en"===g?"and the":"y la"," ",r.a.createElement("a",{href:"/privacy-policy"},"en"===g?"Privacy Policy":"Pol\xedtica de Privacidad"))))),r.a.createElement(q.a,{loading:this.state.loading,disabled:u?!this.state.agreedToTerms||""===this.state.email||""===this.state.password||""===this.state.f_name||""===this.state.l_name:""===this.state.email||""===this.state.password,className:"ui red large fluid button",type:"submit"},d),u&&r.a.createElement(be.a,{error:!0,content:"en"===g?"Passwords do not match":"Las contrase\xf1as no son iguales"})))))),!f&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"ui segment"},u?"en"===g?"Already have an account?":"\xbfYa tienes una cuenta?":"en"===g?"Not a member yet? Create a free account":"Crea una cuenta gratuita","  ",r.a.createElement("a",{href:u?"/signin":"/signup"},u?"en"===g?"Sign In":"Ingresa":"en"===g?"here":"aqu\xed"),"."))))))}}]),a}(n.Component),Je=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleSubmit=function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a,r,l,i,o,c;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=n.props.currentUser.id,n.setState({loading:!0}),e.prev=3,r=new FormData,l=Object(_e.a)(n.state.acceptedFiles);try{for(l.s();!(i=l.n()).done;)o=i.value,r.append("image",o)}catch(s){l.e(s)}finally{l.f()}return r.append("userid",a),r.append("foldername",n.state.foldername),e.next=11,I("POST","".concat("http://localhost:8081","/api/images/uploads/drive/bulk"),r);case 11:c=e.sent,n.setState({loading:!1,modalOn:!0,acceptedFiles:[],arrayBuffers:[],uploadedFiles:[].concat(Object(xe.a)(n.state.uploadedFiles),[c]),foldername:""}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}},e,null,[[3,15]])}));return function(t){return e.apply(this,arguments)}}(),n.state={acceptedFiles:[],images:[],arrayBuffers:[],loading:!1,uploadedFiles:[],modalOn:!1,foldername:""},n.handleDrop=n.handleDrop.bind(Object(ve.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(ve.a)(n)),n.handleChange=n.handleChange.bind(Object(ve.a)(n)),n.onModalClose=n.onModalClose.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.currentUser?this.props.currentUser:null,a=t&&t.id?t.id:null;a&&(S("GET","".concat("http://localhost:8081","/api/images/uploads/drive/track?userid=").concat(a)).then(function(t){e.setState({uploadedFiles:t})}).catch(function(e){console.log(e)}),this.eventSource=new EventSource("".concat("http://localhost:8081","/api/images/uploads/drive/track/stream?userid=").concat(a)),this.eventSource.onmessage=function(t){e.setState({uploadedFiles:JSON.parse(t.data)})})}},{key:"componentDidUpdate",value:function(e,t){var a=this.props.currentUser?this.props.currentUser:null,n=a&&a.id?a.id:null,r=this.state.uploadedFiles.every(function(e){return e.numFiles===e.uploadedFileCount});n&&Ve.a.isEqual(t.uploadedFiles,this.state.uploadedFiles)&&r&&this.eventSource&&(console.log("event stream closed"),this.eventSource.close(),this.eventSource=null)}},{key:"componentWillUnmount",value:function(){this.eventSource&&this.eventSource.close()}},{key:"handleDrop",value:function(e){console.log("acceptedFiles",e);new FileReader;var t=[];e.forEach(function(e){t.push(e)}),ue.a.event({category:"Visualization Tool",action:"File Upload",label:"File upload success"}),this.setState({acceptedFiles:e,arrayBuffers:t})}},{key:"handleChange",value:function(e,t){this.setState(Object(Ee.a)({},t.name,t.value))}},{key:"onModalClose",value:function(){window.location.reload()}},{key:"render",value:function(){var e=this,t=this.props.currentUser?this.props.currentUser:null,a=this.props.language||"en",l=this.state.twoImages?4:8,i=(this.state.twoImages,this.state.acceptedFiles.map(function(e){return"name"in e?r.a.createElement("p",{key:e.name},e.name):"path"in e?r.a.createElement("p",{key:e.path},e.path):r.a.createElement("p",{key:"no-name"},"no-name")}));return this.state.parsedCsvData&&"length"in this.state.parsedCsvData&&this.state.parsedCsvData.slice(this.state.startingRow,this.state.startingRow+this.state.maxRowCount),r.a.createElement(n.Fragment,null,r.a.createElement(ze.a,{open:this.state.modalOn,onClose:this.onModalClose},r.a.createElement(ze.a.Header,null,"en"===a?"Files Received":"Los archivos han sido recibidos"),r.a.createElement(ze.a.Content,null,"en"===a?"We're now processing your files, the upload may take some time. Please check the 'Upload History' table to see the progress of your upload ":"Estamos procesando sus archivos, esto puede tomar un tiempo. Por favor revise la secci\xf3n de 'Historial de Cargas' para ver el progreso"),r.a.createElement(ze.a.Actions,null,r.a.createElement(q.a,{positive:!0,onClick:function(){return window.location.reload()}},"en"===a?"I Understand":"Entendido"))),r.a.createElement("header",{className:"App-hero",style:{minHeight:"75px",backgroundImage:"linear-gradient(45deg, rgb(229, 44, 78) 1%, rgb(233, 74, 99) 30%, rgb(174, 82, 157) 69%, rgb(154, 85, 177) 100%)",color:"white"}}),r.a.createElement("div",{style:{paddingTop:"16px",marginLeft:"40px",marginRight:"40px"}},r.a.createElement(G.a,{stackable:!0},r.a.createElement(G.a.Row,{columns:2},r.a.createElement(G.a.Column,{width:l,style:{textAlign:"left"}},r.a.createElement(G.a.Row,null,r.a.createElement("h1",null,t&&"company"in t?t.company:"en"===a?"Welcome":"Bienvenido(a)")),r.a.createElement(V.a,{hidden:!0}),r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,"en"===a?"Select Files":"Seleccionar Archivos")),r.a.createElement(G.a.Row,null,r.a.createElement(d.a,{basic:!0},"en"===a?"Each file upload creates a new folder. If you'd like to create a new folder, please perform separate uploads":"Cada subida de archivos crea una nueva carpeta. Si deseas crear nuevas carpetas, haz cargas separadas")),r.a.createElement(G.a.Row,null,r.a.createElement(je.a,{multiple:!0,onDrop:function(t){return e.handleDrop(t)}},function(e){var t=e.getRootProps,n=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",Object.assign({className:"dropzone"},t()),r.a.createElement("input",n()),r.a.createElement("p",null,"en"===a?"Drag 'n' drop some files here, or click to select files":"Arrastra los archivos aqu\xed, o haz click para seleccionar archivo")))})),r.a.createElement(G.a.Row,{style:{maxHeight:"100px",overflowY:"scroll"}},i),r.a.createElement(V.a,null),r.a.createElement(G.a.Row,null,r.a.createElement(d.a,{basic:!0},"en"===a?"Please identify this upload with a name that describes the type of data that is being sent over":"Por favor identifique estos archivos con un nombre que describa el tipo de datos que se est\xe1 subiendo")),r.a.createElement(G.a.Row,null,r.a.createElement(he.a,{onChange:this.handleChange,name:"foldername",style:{width:"100%"},placeholder:"en"===a?"Dataset from highway A to B":"Recorrido de via A a B",label:"en"===a?"Type a name for this folder":"Escribe un nombre para esta carpeta"})),r.a.createElement(V.a,{hidden:!0}),r.a.createElement(G.a.Row,null,r.a.createElement(q.a,{fluid:!0,positive:!0,loading:this.state.loading,onClick:this.handleSubmit},"en"===a?"Upload":"Subir"))),r.a.createElement(G.a.Column,null,r.a.createElement("h2",null,"en"===a?"Upload History":"Historial de Cargas"),r.a.createElement(We,Object.assign({},this.props,{uploads:this.state.uploadedFiles})))),t&&"admin"===t.role&&r.a.createElement(n.Fragment,null,r.a.createElement(G.a.Row,null,r.a.createElement("h1",null,"en"===a?"Admin Panel":"Tablero de Administrador")),r.a.createElement(G.a.Row,null,r.a.createElement("h2",null,"en"===a?"Create Users":"Creador de Usuarios")),r.a.createElement(G.a.Row,null,r.a.createElement($e,{adminUserId:t.id,removeAdditionalField:!0,signUp:!0,heading:"en"===a?"Create User":"Crear Usuario",buttonText:"en"===a?"Create":"Crear",errors:{message:""},history:this.props.history,removeError:function(){return console.log("Remove errors")}}))))))}}]),a}(r.a.Component),Ye=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.active;return r.a.createElement("div",{style:{background:"#f7f7f7",minHeight:"100vh"}},r.a.createElement(p.a,{inverted:!0},r.a.createElement(W.a,null,r.a.createElement(p.a.Item,{header:!0},"Image Labeling"),r.a.createElement(U.Link,{to:"/label/"},r.a.createElement(p.a.Item,{active:"label"===e},r.a.createElement(B.a,{name:"tag",style:{marginRight:"5px"}}),"Label")),r.a.createElement(U.Link,{to:"/admin/"},r.a.createElement(p.a.Item,{active:"admin"===e},r.a.createElement(B.a,{name:"pencil",style:{marginRight:"5px"}}),"Admin")),r.a.createElement(U.Link,{to:"/help/"},r.a.createElement(p.a.Item,{active:"help"===e},r.a.createElement(B.a,{name:"help circle",style:{marginRight:"5px"}}),"Help")))),r.a.createElement(W.a,null,this.props.children))}}]),a}(n.Component),Qe=a(661),Ze=a(666),Ke=a(671),Xe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,projects:[]},n.onNewProject=n.onNewProject.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S("get","".concat("http://localhost:8081","/api/projects/"));case 3:if(!(t=e.sent).error||401!==t.status){e.next=7;break}return window.location="/#/admin/login/",e.abrupt("return");case 7:this.setState({isLoaded:!0,projects:t}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.setState({isLoaded:!0,error:e.t0}),window.location="/#/admin/login/";case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"onNewProject",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("post","".concat("http://localhost:8081","/api/projects"));case 2:t=e.sent,this.setState({projects:this.state.projects.concat([t])});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded,n=e.projects,l=this.props,i=l.linkPrefix,o=l.newButton,c=l.title;if(t)return r.a.createElement("div",null,"Error: ",t.message);if(!a)return r.a.createElement(Qe.a,{active:!0,inline:"centered"});var s=o?r.a.createElement(q.a,{style:{padding:"1.5em"},onClick:this.onNewProject},r.a.createElement("span",{style:{fontSize:"4em"}},"+"),r.a.createElement("div",null,"Make a new project")):null;return r.a.createElement("div",null,r.a.createElement(Ke.a,{as:"h1"},c),r.a.createElement(G.a,{stackable:!0,columns:2},n.map(function(e){var t=e.name,a=e.form,n=e.imagesCount,l=e.labelsCount,o=e._id,c="".concat(n," images, ").concat(l," labeled"),s="Tags: ".concat(a.formParts.map(function(e){return e.name}).join(", "));return r.a.createElement(G.a.Column,{key:o},r.a.createElement("a",{href:"/#".concat(i).concat(o)},r.a.createElement(Ze.a,{fluid:!0,link:!0,header:t,meta:c,description:s})))}),r.a.createElement(G.a.Column,null,s)))}}]),a}(n.Component),et=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-hero",style:{minHeight:"75px",backgroundImage:"linear-gradient(45deg, rgb(229, 44, 78) 1%, rgb(233, 74, 99) 30%, rgb(174, 82, 157) 69%, rgb(154, 85, 177) 100%)",color:"white"}}),r.a.createElement("div",null,r.a.createElement(Ye,Object.assign({},this.props,{active:"label"}),r.a.createElement(Xe,Object.assign({},this.props,{title:"Start Labeling:",linkPrefix:"/label/",newButton:!1})))))}}]),a}(n.Component),tt=(a(629),a(665)),at=a(172),nt=a.n(at),rt=a(137),lt=a(30),it=a.n(lt),ot=a(362),ct=a.n(ot),st=a(231),ut=a(363),mt=a.n(ut),dt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,images:[]},n.handleLabeled=n.handleLabeled.bind(Object(ve.a)(n)),n.handleDelete=n.handleDelete.bind(Object(ve.a)(n)),n.markAllNotLabeled=n.markAllNotLabeled.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.projectId!==e.projectId||!mt()(this.state,t)}},{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.refetchRef(this.refetch.bind(this)),e.next=3,this.refetch();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"refetch",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t,a;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.projectId,e.prev=1,e.next=4,S("GET","".concat("http://localhost:8081","/api/images/?projectId=").concat(t));case 4:a=e.sent,this.setState({isLoaded:!0,images:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),this.setState({isLoaded:!0,error:e.t0});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleLabeled",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t,a){var n,r;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleLabeled imageid",t),console.log("handleLabeled labeled",a),n=this.state.images,r=n.findIndex(function(e){return e._id===t}),this.setState(function(e){return{images:it()(e.images,{$splice:[[r,1,Object(H.a)({},e.images[r],{labeled:a})]]})}}),e.next=7,S("PATCH","".concat("http://localhost:8081","/api/images/").concat(t),{labeled:a});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a,n;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.images,n=a.findIndex(function(e){return e._id===t}),this.setState(function(e){return{images:it()(e.images,{$splice:[[n,1]]})}}),e.next=5,S("DELETE","".concat("http://localhost:8081","/api/images/").concat(t));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"markAllNotLabeled",value:function(){var e=this;this.state.images.forEach(function(t){return e.handleLabeled(t._id,!1)})}},{key:"render",value:function(){var e=this,t=this.props.projectId,a=this.state,n=a.error,l=a.isLoaded,i=a.images;return n?r.a.createElement("div",null,"Error: ",n.message):l?i.length?r.a.createElement("div",{className:"project-images"},r.a.createElement(Ie.a,{celled:!0,style:{display:"flex",flexDirection:"column",height:600}},r.a.createElement(Ie.a.Header,{style:{flex:"0 0 auto"}},r.a.createElement(Ie.a.Row,{style:{display:"flex",background:"#f9fafb"}},r.a.createElement(Ie.a.HeaderCell,{style:pt[0]},"ID"),r.a.createElement(Ie.a.HeaderCell,{style:pt[1]},"Image Link"),r.a.createElement(Ie.a.HeaderCell,{style:pt[2]},"Label Status"),r.a.createElement(Ie.a.HeaderCell,{style:pt[3]},"Actions"),r.a.createElement(Ie.a.HeaderCell,{style:{flex:"0 0 auto",opacity:0,overflowY:"scroll",padding:0,border:0}}))),r.a.createElement(Ie.a.Body,{style:{height:"100%",flex:1,outline:0}},r.a.createElement(gt,{rowHeight:55,rowCount:i.length,style:{overflowY:"scroll"},rowRenderer:function(a){var n=a.index,l=a.style,o=a.key;return r.a.createElement(ht,{key:o,style:l,image:i[n],projectId:t,onLabeled:e.handleLabeled,onDelete:e.handleDelete})},overscanRowCount:10}))),r.a.createElement(q.a,{style:{float:"right"},icon:"cancel",label:"Mark all images as 'Unlabeled'",onClick:this.markAllNotLabeled})):r.a.createElement(Ke.a,{className:"centered",as:"h5"},"No images, upload images using the form below"):r.a.createElement(Qe.a,{active:!0,inline:"centered"})}}]),a}(n.Component),pt=[{flex:"0 0 80px",lineHeight:"32px"},{flex:"1",lineHeight:"32px"},{flex:"0 0 120px",lineHeight:"32px"},{flex:"0 0 250px",lineHeight:"32px"}],ht=function(e){var t=e.image,a=e.projectId,n=e.style,l=e.onLabeled,i=e.onDelete;return r.a.createElement(Ie.a.Row,{style:Object(H.a)({},n,{display:"flex"})},r.a.createElement(Ie.a.Cell,{style:pt[0]},t._id),r.a.createElement(Ie.a.Cell,{style:pt[1]},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(t.externalLink)},t.originalName)),r.a.createElement(Ie.a.Cell,{style:pt[2]},r.a.createElement(Se.a,{checked:!!t.labeled,label:"Labeled",onChange:function(e,a){var n=a.checked;return l(t._id,n)}})),r.a.createElement(Ie.a.Cell,{style:pt[3]},r.a.createElement("div",null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/#/label/".concat(a,"/").concat(t._id)},r.a.createElement(q.a,{positive:!0,icon:"pencil",label:"Edit",size:"tiny"})),r.a.createElement(q.a,{color:"red",icon:"trash",label:"Delete",size:"tiny",onClick:function(){return i(t._id)}}))))},gt=function(e){return r.a.createElement(st.a,null,function(t){var a=t.height,n=t.width;return r.a.createElement(st.b,Object.assign({height:a,width:n},e))})},ft=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={urlsText:"",localPath:"",urlsError:null,localPathError:null},n.handleChange=n.handleChange.bind(Object(ve.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(ve.a)(n)),n.handlePathSubmit=n.handlePathSubmit.bind(Object(ve.a)(n)),n.handleFilesSubmit=n.handleFilesSubmit.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e,t){var a=t.name,n=t.value;this.setState(Object(Ee.a)({},a,n))}},{key:"handleSubmit",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t,a,n,r;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.urlsText,a=this.props.projectId,t){e.next=4;break}return e.abrupt("return");case 4:return n=t.trim().split("\n").filter(function(e){return""!==e}),console.log("urls",n),e.next=8,S("POST","".concat("http://localhost:8081","/api/images/"),{projectId:a,urls:n});case 8:if((r=e.sent).ok){e.next=12;break}return this.setState({urlsError:r.message}),e.abrupt("return");case 12:this.setState({urlsError:null}),this.props.onChange(),this.setState({urlsText:""});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleFilesSubmit",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a,n;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target,n=new FormData(a),e.next=5,S("POST","".concat("http://localhost:8081","/api/uploads/").concat(this.props.projectId),n);case 5:this.props.onChange(),a.reset();case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handlePathSubmit",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a,n,r,l;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=t.target,n=this.state.localPath,r=this.props.projectId,n){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,S("POST","".concat("http://localhost:8081","/api/images/"),{projectId:r,localPath:n});case 8:if((l=e.sent).ok){e.next=12;break}return this.setState({localPathError:l.message}),e.abrupt("return");case 12:this.setState({localPathError:null}),this.props.onChange(),a.reset();case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.urlsText,a=e.urlsError,n=(e.localPath,e.localPathError),l=a?r.a.createElement(be.a,{negative:!0},a):null;n&&be.a;return r.a.createElement(d.a,null,r.a.createElement(G.a,{columns:1,relaxed:"very",stackable:!0},r.a.createElement(G.a.Column,null,r.a.createElement(se.a,{onSubmit:this.handleSubmit},r.a.createElement(se.a.TextArea,{name:"urlsText",label:"Images URLs",placeholder:"One URL per line i.e. https://images.com/cat.jpg",rows:"3",value:t,onChange:this.handleChange}),r.a.createElement(q.a,{positive:!0},"Source from URLs")),l)))}}]),a}(n.Component),Et=a(653);var vt={background:"linear-gradient(#408dff, #4791ff 20%, hsl(0deg 0% 100%) 0px, rgb(255, 255, 255) 40%, #4791ff 0px, #4791ff 60%, rgb(255, 255, 255) 0px, rgb(255, 255, 255) 80%, #4791ff 0px, #4791ff)",width:25,minWidth:25,height:20,opacity:.55,cursor:"move"},bt=Object(rt.c)(function(e){var t=e.style;return r.a.createElement("div",{style:Object(H.a)({},vt,{},t)})}),yt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={message:null,loading:!1},n.handleFilesSubmit=n.handleFilesSubmit.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"handleFilesSubmit",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a,n,r,l,i;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target,n=new FormData(a),this.setState({message:null}),e.next=6,S("POST","".concat("http://localhost:8081","/api/import/").concat(this.props.projectId),n);case 6:return r=e.sent,e.next=9,r.json();case 9:l=e.sent,i=l.message,this.setState({message:i,loading:!1}),a.reset(),this.props.onChange();case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.message,a=e.loading?r.a.createElement(Qe.a,null):null,n=(t||"").split("\n").map(function(e,t){return r.a.createElement("div",{key:t},e)});return r.a.createElement(d.a,null,r.a.createElement("p",null,"Import image labels exported from tools like"," ",r.a.createElement("a",{href:"https://labelbox.com"},"LabelBox"),"."),r.a.createElement("p",null,'The files must be formatted as a valid JSON, with corresponding image name in the "imagePath" field.'),r.a.createElement("p",null,'Objects from the "shapes" field will be imported as polygons with corresponding labels created.'),r.a.createElement(se.a,{method:"post",encType:"multipart/form-data",onSubmit:this.handleFilesSubmit},r.a.createElement(se.a.Input,{label:"Select JSON files",multiple:!0,type:"file",id:"files",name:"files",accept:".json"}),r.a.createElement(q.a,{type:"submit"},"Import")),a,r.a.createElement("div",{style:{marginTop:"2em"}},n))}}]),a}(n.Component),wt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={uploadError:null},n.handleFileSubmit=n.handleFileSubmit.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"handleFileSubmit",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a,n,r;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target,n=new FormData(a),e.next=5,fetch("".concat("http://localhost:8081","/api/uploads/").concat(this.props.project.id,"/reference"),{method:"POST",body:n});case 5:if((r=e.sent).ok){e.next=14;break}return e.t0=this,e.next=10,r.json();case 10:return e.t1=e.sent.message,e.t2={uploadError:e.t1},e.t0.setState.call(e.t0,e.t2),e.abrupt("return");case 14:this.setState({uploadError:null}),a.reset(),this.props.onUpload();case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.uploadError,t=this.props,a=t.onChange,n=t.project,l=n.referenceText,i=n.referenceLink,o=e?r.a.createElement(be.a,{negative:!0},e):null,c=null;if(l||i){var s=i?r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("img",{alt:"Reference",style:{width:"auto",maxWidth:"100%"},src:i}),r.a.createElement(q.a,{icon:"trash",size:"tiny",label:"Delete",style:{position:"absolute",top:0,right:-125},onClick:function(){return a({referenceText:l,referenceLink:null})}})):null;c=r.a.createElement("div",null,r.a.createElement(Ke.a,null,"Preview"),r.a.createElement("p",null,"This is what the reference image and text would look like on the top of the labeling page:"),r.a.createElement(d.a,null,s,l),r.a.createElement(V.a,null))}return r.a.createElement(d.a,null,c,r.a.createElement(se.a,{method:"post",encType:"multipart/form-data",onSubmit:this.handleFileSubmit},r.a.createElement(se.a.Input,{label:"Upload image from disk",type:"file",id:"referenceImage",name:"referenceImage",accept:".jpg, .jpeg, .png",action:"Upload",style:{maxWidth:600}})),o,r.a.createElement(se.a,{style:{marginTop:"1em",maxWidth:600}},r.a.createElement(se.a.TextArea,{autoHeight:!0,label:"Reference Text",placeholder:"Instructions, descriptions, etc",defaultValue:l,onChange:function(e,t){var n=t.value;return a({referenceText:n,referenceLink:i})}})),r.a.createElement(V.a,null),r.a.createElement("p",null,"The reference information (image and/or text) will be shown on top of the labeling interface to give the labelers more instruction on how to label or something to compare to (image of the key colors, reference images, etc)."))}}]),a}(n.Component),kt=[{value:"object_detection",text:"Object Detection"},{value:"object_classification",text:"Object Classification"},{value:"semantic_segmentation",text:"Semantic Segmentation"}],Ct={object_detection:'\n{\n  "predictions": [\n    {\n       "det_boxes": [<ymin>, <xmin>, <ymax>, <xmax>],\n       "det_class": <str>,\n       "det_score": <0 ~ 1 floating number\n    },\n    ...,\n    ...\n    ]\n}\n',object_classification:'\n{\n  "predictions": [[<str>, <str>, <str>, <str>, <str>]]\n}\n',semantic_segmentation:'\n{\n  "predictions": [[...], [...], [...], ...]\n}\n'},xt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,models:null,currentValue:kt[0].value,url:null,name:null},n.onSubmit=n.onSubmit.bind(Object(ve.a)(n)),n.onDelete=n.onDelete.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.reload()}},{key:"reload",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S("GET","".concat("http://localhost:8081","/api/mlmodels/"));case 3:t=e.sent,this.setState({isLoaded:!0,error:null,models:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.setState({isLoaded:!0,error:e.t0});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"onSubmit",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a,n,r,l,i;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target,n=this.state.currentValue,r=this.state,l=r.url,i=r.name,e.next=6,S("POST","".concat("http://localhost:8081","/api/mlmodels/"),{model:{url:l,name:i,type:n}});case 6:a.reset(),this.reload();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onDelete",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("DELETE","".concat("http://localhost:8081","/api/mlmodels/").concat(t));case 2:this.reload();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.error,n=t.isLoaded,l=t.models,i=t.currentValue;if(a)return r.a.createElement("div",null,"Error: ",a.message);if(!n)return r.a.createElement(Qe.a,{active:!0,inline:"centered"});var o=l.length?null:r.a.createElement("div",{style:{textAlign:"center",padding:"3em"}},"No end-points, add one below");return r.a.createElement(d.a,null,r.a.createElement(Ke.a,{as:"h2"},"Available end-points"),r.a.createElement(Ie.a,null,r.a.createElement(Ie.a.Header,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.HeaderCell,null,"Name"),r.a.createElement(Ie.a.HeaderCell,null,"URL"),r.a.createElement(Ie.a.HeaderCell,null,"Type"),r.a.createElement(Ie.a.HeaderCell,null,"Actions"))),r.a.createElement(Ie.a.Body,null,(l||[]).map(function(t){var a=t.id,n=t.name,l=t.url,i=t.type;return r.a.createElement(Ie.a.Row,{key:a},r.a.createElement(Ie.a.Cell,null,n),r.a.createElement(Ie.a.Cell,null,l),r.a.createElement(Ie.a.Cell,null,i),r.a.createElement(Ie.a.Cell,null,r.a.createElement(q.a,{icon:"trash",label:"Delete",size:"tiny",onClick:function(){return e.onDelete(a)}})))}))),o,r.a.createElement("div",{style:{marginTop:"2em"}},r.a.createElement(Ke.a,{as:"h2"},"Add a new end-point"),r.a.createElement(se.a,{style:{maxWidth:600}},r.a.createElement(se.a.Select,{label:"Model type",options:kt,value:i,onChange:function(t,a){var n=a.value;return e.setState({currentValue:n})}})),r.a.createElement(Ke.a,{as:"h3"},"Expected API format"),r.a.createElement(Ie.a,null,r.a.createElement(Ie.a.Header,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.HeaderCell,null,"Input Format"),r.a.createElement(Ie.a.HeaderCell,null,"Output Format"))),r.a.createElement(Ie.a.Body,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,r.a.createElement("pre",null,'\n{\n  "instances": [\n    {\n      "input_bytes": {\n        "b64": "<str>"\n      }\n    }\n  ]\n}\n')),r.a.createElement(Ie.a.Cell,null,r.a.createElement("pre",null,Ct[i]))))),r.a.createElement(se.a,{style:{maxWidth:600},onSubmit:this.onSubmit},r.a.createElement(se.a.Input,{label:"Display Name",placeholder:"my_model",onChange:function(t,a){var n=a.value;return e.setState({name:n})}}),r.a.createElement(se.a.Input,{label:"URL",placeholder:"http://host:port/v1/models/{MODEL_NAME}:predict",onChange:function(t,a){var n=a.value;return e.setState({url:n})}}),r.a.createElement(q.a,{type:"submit"},"Add"))))}}]),a}(n.Component),jt=a(364),Ot=a(365),St=(a(632),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={error:null,isLoaded:!1,project:null},n.onSortEnd=n.onSortEnd.bind(Object(ve.a)(n)),n.handleChange=n.handleChange.bind(Object(ve.a)(n)),n.handleNew=n.handleNew.bind(Object(ve.a)(n)),n.handleDelete=n.handleDelete.bind(Object(ve.a)(n)),n.handleNameChange=n.handleNameChange.bind(Object(ve.a)(n)),n.handleReferenceChange=n.handleReferenceChange.bind(Object(ve.a)(n)),n.handleProjectExport=n.handleProjectExport.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t,a;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.location.pathname.replace("/admin/",""),e.prev=1,e.next=4,S("GET","".concat("http://localhost:8081","/api/projects/").concat(t));case 4:a=e.sent,console.log("componentDidMount project",a),a&&"form"in a&&a.form&&(a.form=JSON.parse(a.form)),this.setState({isLoaded:!0,project:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),this.setState({isLoaded:!0,error:e.t0});case 13:case"end":return e.stop()}},e,this,[[1,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){var a=this.state.project;if(a){var n=this.props.location.pathname.replace("/admin/","");t.project!==a&&S("PATCH","".concat("http://localhost:8081","/api/projects/").concat(n),{project:Object(H.a)({},a,{form:JSON.stringify(a.form)})})}}},{key:"onSortEnd",value:function(e){var t=e.oldIndex,a=e.newIndex;this.setState(function(e){var n=e.project;return{project:it()(n,{form:{formParts:{$set:ct()(n.form.formParts,t,a)}}})}})}},{key:"handleProjectExport",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t,a,n,r,l,i;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.project._id,e.next=3,S("GET","".concat("http://localhost:8081","/api/projects/").concat(t,"/export"));case 3:a=e.sent,console.log(a),new Ot,0,n="engin-ai-labeling-project-".concat(t),r={},a.forEach(function(e){e.name;var t=JSON.parse(e.contents),a=t.imageId||Math.random();r[a]=t}),console.log(r),l=JSON.stringify(r),i=new Blob([l],{type:"application/json"}),Object(jt.saveAs)(i,n);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e,t){var a=this.state.project,n=t?[1,t]:[1];this.setState({project:it()(a,{form:{formParts:{$splice:[[a.form.formParts.findIndex(function(t){return t.id===e.id})].concat(n)]}}})})}},{key:"handleNew",value:function(){var e=this.state.project;console.log("project",e),this.setState({project:it()(e,{form:{formParts:{$push:[Rt()]}}})})}},{key:"handleDelete",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t,a,n;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,t.match,a=t.history,n=this.props.location.pathname.replace("/admin/",""),e.next=4,S("DELETE","".concat("http://localhost:8081","/api/projects/").concat(n));case 4:a.push("/admin/");case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleNameChange",value:function(e){var t=e.target.value,a=this.state.project;this.setState({project:it()(a,{name:{$set:t}})})}},{key:"handleReferenceChange",value:function(e){var t=e.referenceLink,a=e.referenceText,n=this.state.project;this.setState({project:it()(n,{referenceText:{$set:a},referenceLink:{$set:t}})})}},{key:"render",value:function(){var e=this,t=(this.props.match,this.props.location.pathname.replace("/admin/","")),a=this.state,n=a.error,l=a.isLoaded,i=a.project;if(n)return r.a.createElement("div",null,"Error: ",n.message);if(!l)return r.a.createElement(Qe.a,{active:!0,inline:"centered"});var o=i&&i.form&&i.form.formParts?i.form.formParts:[],c=o&&o.length?o.map(function(t,a){return r.a.createElement(It,{key:t.id,index:a,value:t,onChange:e.handleChange})}):r.a.createElement(Ke.a,{className:"centered",as:"h5"},"No labels, add labels using the plus button below");return r.a.createElement(nt.a,{title:"Edit project ".concat(i.name)},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"ui",style:{paddingBottom:200,flex:1}},r.a.createElement(he.a,{placeholder:"Project name",control:"input",defaultValue:i.name,style:{fontSize:24,width:"100%",marginTop:10},onChange:this.handleNameChange}),r.a.createElement("div",{style:{display:"flex",flexDirection:"row-reverse",marginTop:5}},r.a.createElement(he.a,{label:"Labeling link",value:window.location.origin+"/label/"+t,onClick:function(e){return e.target.select()}})),r.a.createElement("div",{id:"labels",style:{padding:"2em 0 110px 0"}},r.a.createElement(Ke.a,{disabled:!0},"LABELS"),r.a.createElement(Dt,{onSortEnd:this.onSortEnd,useDragHandle:!0},c),r.a.createElement(q.a,{circular:!0,icon:"plus",color:"teal",size:"massive",style:{float:"right",marginTop:"2em"},onClick:this.handleNew})),r.a.createElement("div",{id:"images",style:{padding:"2em 0"}},r.a.createElement(Ke.a,{disabled:!0},"IMAGES"),r.a.createElement(dt,{projectId:t,refetchRef:function(t){return e.setState({handleImagesChange:t})}})),r.a.createElement("div",{id:"upload-images",style:{padding:"2em 0"}},r.a.createElement(Ke.a,{disabled:!0},"UPLOAD IMAGES"),r.a.createElement(ft,{projectId:t,onChange:this.state.handleImagesChange})),r.a.createElement("div",{id:"import-data",style:{padding:"2em 0"}},r.a.createElement(Ke.a,{disabled:!0},"IMPORT DATA"),r.a.createElement(yt,{projectId:t,onChange:function(){e.state.handleImagesChange(),e.componentDidMount()}})),r.a.createElement("div",{id:"export-data",style:{padding:"2em 0"}},r.a.createElement(Ke.a,{disabled:!0},"EXPORT DATA"),r.a.createElement("div",{onClick:this.handleProjectExport},r.a.createElement(q.a,{positive:!0,icon:"download",label:"Download a JSON-encoded file"}))),r.a.createElement("div",{id:"reference-information",style:{padding:"2em 0"}},r.a.createElement(Ke.a,{disabled:!0},"REFERENCE INFORMATION"),r.a.createElement(wt,{project:i,onChange:this.handleReferenceChange,onUpload:function(){return e.componentDidMount()}})),r.a.createElement("div",{id:"ml-assistance",style:{padding:"2em 0"}},r.a.createElement(Ke.a,{disabled:!0},"ML ASSISTANCE MODELS"),r.a.createElement(xt,null)),r.a.createElement("div",{id:"delete-project",style:{padding:"2em 0"}},r.a.createElement(Ke.a,{disabled:!0},"DELETE PROJECT"),r.a.createElement("p",null,"The button bellow will delete all metadata about labels, images and the project."),r.a.createElement(q.a,{negative:!0,onClick:this.handleDelete},"Delete project"))),r.a.createElement(d.a,{style:{flex:"0 0 auto",width:200,position:"sticky",top:65,alignSelf:"flex-start",marginTop:0,marginLeft:30,boxShadow:"0 0 #FFFFFF"}},r.a.createElement(Ke.a,{as:"h4"},"On this page:"),r.a.createElement(tt.a,null,r.a.createElement(tt.a.Item,null,r.a.createElement(y.HashLink,{to:"#labels"},"Labels")),r.a.createElement(tt.a.Item,null,r.a.createElement(y.HashLink,{to:"#images"},"Images")),r.a.createElement(tt.a.Item,null,r.a.createElement(y.HashLink,{to:"#upload-images"},"Upload Images")),r.a.createElement(tt.a.Item,null,r.a.createElement(y.HashLink,{to:"#import-data"},"Import data")),r.a.createElement(tt.a.Item,null,r.a.createElement(y.HashLink,{to:"#export-data"},"Export data")),r.a.createElement(tt.a.Item,null,r.a.createElement(y.HashLink,{to:"#reference-information"},"Reference Info")),r.a.createElement(tt.a.Item,null,r.a.createElement(y.HashLink,{to:"#ml-assistance"},"ML Assistance")),r.a.createElement(tt.a.Item,null,r.a.createElement(y.HashLink,{to:"#delete-project"},"Delete Project"))))))}}]),a}(n.Component)),It=Object(rt.b)(function(e){var t=e.value,a=e.onChange,n=function(e){var t=e.value,a=e.onChange;if("text"===t.type)return r.a.createElement(he.a,{label:"Input box prompt",className:"visible",placeholder:"Ex.: 'car brand and model'",onChange:function(e,n){return a(t,Object(H.a)({},t,{prompt:n.value}))}});if("select"===t.type||"select-one"===t.type){var n=t.options||[],l="select"===t.type?Se.a:Et.a,i=n.map(function(e,i){return r.a.createElement("div",{key:i,className:"form-checkbox"},r.a.createElement(l,{checked:!1,tabIndex:"-1"}),r.a.createElement(he.a,{style:{top:"-3px"},value:e,size:"small",onChange:function(e,r){return a(t,Object(H.a)({},t,{options:it()(n,{$splice:[[i,1,r.value]]})}))}}),r.a.createElement(q.a,{color:"red",type:"button",icon:"trash",style:{background:"transparent"},onClick:function(){return a(t,Object(H.a)({},t,{options:it()(n,{$splice:[[i,1]]})}))}}))});return r.a.createElement("div",null,r.a.createElement(Ke.a,{as:"h5"},"Options:"),i,r.a.createElement(q.a,{type:"button",size:"mini",circular:!0,icon:"plus",color:"teal",onClick:function(){return a(t,Object(H.a)({},t,{options:it()(n,{$push:["Option"]})}))}}))}return null}({value:t,onChange:a});return r.a.createElement("div",{style:{marginTop:"0.7em",padding:"1em",border:"solid 1px #efefef",background:"white",shadow:"rgb(204, 204, 204) 0px 1px 2px"}},r.a.createElement(se.a,{className:"form-card",style:{display:"flex"}},r.a.createElement(bt,{style:{flex:0,marginTop:9}}),r.a.createElement("div",{style:{flex:1,padding:"0 0.5em"}},r.a.createElement(se.a.Field,{placeholder:"Label name",control:"input",defaultValue:t.name,style:{padding:3,fontSize:24},onChange:function(e){return a(t,Object(H.a)({},t,{name:e.target.value}))}}),r.a.createElement(se.a.Select,{label:"Label type",options:[{key:"bbox",text:"Draw a bounding box",value:"bbox"},{key:"polygon",text:"Draw a polygon figure",value:"polygon"},{key:"text",text:"Enter a text label",value:"text"},{key:"select",text:"Select all tags that apply",value:"select"},{key:"polyline",text:"Draw an unclosed line",value:"polyline"},{key:"select-one",text:"Select one tag that applies",value:"select-one"}],defaultValue:t.type,onChange:function(e,n){return a(t,Object(H.a)({},t,{type:n.value}))},style:{maxWidth:400}}),n),r.a.createElement("div",{style:{flex:"0 0 auto"}},r.a.createElement(q.a,{type:"button",style:{background:"transparent",padding:0},onClick:function(){return a(t,null)}},r.a.createElement(B.a,{color:"red",name:"trash"})))))}),Dt=Object(rt.a)(function(e){var t=e.children;return r.a.createElement("div",null,t)}),Rt=function(){return{id:Math.random().toString(36).substr(2,9),name:"New label",type:"bbox"}},At=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={password:"",error:null},n.onSubmit=n.onSubmit.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"onSubmit",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.password,e.next=3,fetch("".concat("http://localhost:8081","/api/auth?password=").concat(a));case 3:e.sent.ok?(this.setState({error:null}),window.location="/admin/"):this.setState({error:"Wrong password"});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.authUser?this.props.authUser:function(){return console.log("No auth user")},t=this.props.language?this.props.language:"en",a=this.props.removeError?this.props.removeError:function(){return console.log("No remove error")};return r.a.createElement(ye,Object.assign({removeError:a,removeAdditionalField:!0,language:t,buttonText:"en"===t?"Log in":"Ingresa",heading:"en"===t?"Welcome Back!":"\xa1Aprende Ahora!",onAuth:e},this.props))}}]),a}(n.Component),Lt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-hero",style:{minHeight:"75px",backgroundImage:"linear-gradient(45deg, rgb(229, 44, 78) 1%, rgb(233, 74, 99) 30%, rgb(174, 82, 157) 69%, rgb(154, 85, 177) 100%)",color:"white"}}),r.a.createElement("div",null,r.a.createElement(Ye,{active:"admin"},r.a.createElement(U.HashRouter,null,r.a.createElement(k.g,null,r.a.createElement(k.d,{path:"/admin/:projectId",render:function(t){return r.a.createElement(St,Object.assign({browserLang:e.props.browserLang},e.props))}}),r.a.createElement(k.d,{exact:!0,path:"/admin/",render:function(){return r.a.createElement(Xe,{linkPrefix:"/admin/",title:"Edit Projects:",newButton:!0})}}),r.a.createElement(k.d,{exact:!0,path:"/admin/login",render:function(t){return r.a.createElement(At,Object.assign({browserLang:e.props.browserLang},e.props))}}))))))}}]),a}(n.Component),Ft=a(105),Nt=a(20),_t=a(323),Pt=a(326),Tt=a(322),Ut=a(366),Ht=a.n(Ut),zt=(a(634),a(640),a(324)),Mt=a(325),qt=a(321),Bt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={dragging:!1,draggedPoint:null},n}return Object(c.a)(a,[{key:"calculateGuides",value:function(){return[]}},{key:"onPointClick",value:function(e){}},{key:"onPointMoved",value:function(e,t){}},{key:"makeExtraElements",value:function(){return null}},{key:"leafletComponent",value:function(){return zt.a}},{key:"getRenderPoints",value:function(e){return e}},{key:"makeGuides",value:function(){var e=this.calculateGuides(),t=this.props.options.color;return e.map(function(e,a){return r.a.createElement(Mt.a,{key:a,positions:e,color:t,opacity:.7,dashArray:"5",weight:2})})}},{key:"hasFill",value:function(){return!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.figure,l=t.options,i=t.skipNextClick,o=a.id,c=a.points,s=l.editing,u=l.finished,m=l.sketch,d=l.color,p=l.vertexColor,h=l.interactive,g=l.onSelect,f=this.state.draggedPoint,E=this.getRenderPoints(c),v=s?"10":"1",b=s&&m?d:p||d,y=s&&m?"rgba(0,0,0,0)":d,w=s&&m?2:3,k=["vertex"];s&&k.push("editing"),u&&k.push("finished");var C=p||d,x=E.map(function(t,a){return r.a.createElement(qt.a,{className:k.concat(a?[]:["first"]).join(" "),key:o+"-"+a,center:t,fillOpacity:0,opacity:0,radius:5,onClick:function(){return e.onPointClick(a)},draggable:s,onDrag:function(t){e.setState({draggedPoint:{point:t.target.getLatLng(),index:a}})},onDragstart:function(t){return e.setState({dragging:!0})},onDragend:function(t){e.onPointMoved(t.target.getLatLng(),a),e.setState({dragging:!1,draggedPoint:null})}},r.a.createElement(qt.a,{color:C,fill:!0,fillColor:C,fillRule:"nonzero",fillOpacity:1,radius:3,center:f&&f.index===a?f.point:t}))}),j=this.makeGuides(),O=this.leafletComponent();return r.a.createElement(n.Fragment,{key:o},r.a.createElement(O,{positions:E,color:b,weight:w,fill:this.hasFill(),fillColor:y,opacity:m?"0.7":"1.0",dashArray:v,interactive:"trace"!==o,onClick:function(){h&&(g(),i())}}),j,this.makeExtraElements(),!u||s?x:null)}}]),a}(n.Component),Wt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onPointClick=n.onPointClick.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"leafletComponent",value:function(){return this.props.options.finished?zt.a:Mt.a}},{key:"calculateGuides",value:function(){var e=this.props,t=e.figure,a=e.options,n=t.points,r=a.newPoint,l=a.finished,i=this.state.draggedPoint,o=[];if(i){var c=i.point,s=i.index,u=n.length;o.push([c,n[(s+1)%u]],[c,n[(s-1+u)%u]])}var m=!l&&n.length>0?[[n[n.length-1],r]]:[];return o.concat(m)}},{key:"makeExtraElements",value:function(){var e=this.props,t=e.figure,a=e.options,n=e.skipNextClick,l=t.id,i=t.points,o=a.editing,c=a.finished,s=a.calcDistance,u=a.onChange,m=this.state.dragging;return c&&o&&!m?i.map(function(e,t){return[e,i[(t+1)%i.length],t]}).filter(function(e){var t=Object(Te.a)(e,2),a=t[0],n=t[1];return s(a,n)>40}).map(function(e){var a=Object(Te.a)(e,3),i=a[0],o=a[1],c=a[2];return r.a.createElement(qt.a,{key:l+"-"+c+"-mid",className:"midpoint",center:Vt(i,o),radius:8,opacity:0,fillOpacity:0,onMousedown:function(e){u("add",{point:Vt(i,o),pos:c+1,figure:t}),n()}},r.a.createElement(qt.a,{radius:3,color:"white",fill:!0,fillOpacity:.5,opacity:.5,center:Vt(i,o)}))}):[]}},{key:"onPointMoved",value:function(e,t){var a=this.props,n=a.figure;(0,a.options.onChange)("move",{point:e,pos:t,figure:n})}},{key:"onPointClick",value:function(e){var t=this.props,a=t.figure,n=t.options,r=t.skipNextClick,l=a.points,i=n.finished,o=n.editing,c=n.onChange;return i||0!==e?i&&o?(l.length>3&&c("remove",{pos:e,figure:a}),r(),!1):void 0:(l.length>=3&&c("end",{}),r(),!1)}}]),a}(Bt),Gt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"calculateGuides",value:function(){var e=this.props,t=e.figure,a=e.options,n=t.points,r=a.newPoint,l=a.finished,i=this.state.draggedPoint;if(i){var o=this.getRenderPoints(n),c=i.point,s=o[(i.index+2)%o.length],u={lat:s.lat,lng:c.lng},m={lat:c.lat,lng:s.lng};return[[c,u],[u,s],[c,m],[m,s]]}if(!l&&n.length>0){var d=this.getRenderPoints([n[0],r]);return[[d[0],d[1]],[d[1],d[2]],[d[2],d[3]],[d[3],d[0]]]}return[]}},{key:"getRenderPoints",value:function(e){var t=Object(Te.a)(e,2),a=t[0],n=t[1];return a?n?[{lat:a.lat,lng:a.lng},{lat:a.lat,lng:n.lng},{lat:n.lat,lng:n.lng},{lat:n.lat,lng:a.lng}]:[a]:[]}},{key:"onPointMoved",value:function(e,t){var a=this.props,n=a.figure,r=a.options.onChange;if(0===t||2===t)r("move",{point:e,pos:t/2,figure:n});else{var l=Object(Te.a)(n.points,2),i=l[0],o=l[1];r("replace",{points:1===t?[{lat:e.lat,lng:i.lng},{lat:o.lat,lng:e.lng}]:[{lat:i.lat,lng:e.lng},{lat:e.lat,lng:o.lng}],figure:n})}}}]),a}(Bt);function Vt(e,t){return{lat:(e.lat+t.lat)/2,lng:(e.lng+t.lng)/2}}var $t=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onPointClick=n.onPointClick.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"leafletComponent",value:function(){this.props.options.finished;return Mt.a}},{key:"calculateGuides",value:function(){var e=this.props,t=e.figure,a=e.options,n=t.points,r=a.newPoint,l=a.finished,i=this.state.draggedPoint,o=[];if(i){var c=i.point,s=i.index,u=n.length;o.push([c,n[(s+1)%u]],[c,n[(s-1+u)%u]])}var m=!l&&n.length>0?[[n[n.length-1],r]]:[];return o.concat(m)}},{key:"hasFill",value:function(){return!1}},{key:"makeExtraElements",value:function(){var e=this.props,t=e.figure,a=e.options,n=e.skipNextClick,l=t.id,i=t.points,o=a.editing,c=a.finished,s=a.calcDistance,u=a.onChange,m=this.state.dragging;return c&&o&&!m?i.map(function(e,t){return[e,i[(t+1)%i.length],t]}).filter(function(e){var t=Object(Te.a)(e,2),a=t[0],n=t[1];return s(a,n)>40}).map(function(e){var a=Object(Te.a)(e,3),i=a[0],o=a[1],c=a[2];return r.a.createElement(qt.a,{key:l+"-"+c+"-mid",className:"midpoint",center:Vt(i,o),radius:8,opacity:0,fillOpacity:0,onMousedown:function(e){u("add",{point:Vt(i,o),pos:c+1,figure:t}),n()}},r.a.createElement(qt.a,{radius:3,color:"white",fill:!0,fillOpacity:.5,opacity:.5,center:Vt(i,o)}))}):[]}},{key:"onPointMoved",value:function(e,t){var a=this.props,n=a.figure;(0,a.options.onChange)("move",{point:e,pos:t,figure:n})}},{key:"onPointClick",value:function(e){var t=this.props,a=t.figure,n=t.options,r=t.skipNextClick,l=a.points,i=n.finished,o=n.editing,c=n.onChange;return i||0!==e?i&&o?(l.length>3&&c("remove",{pos:e,figure:a}),r(),!1):void 0:(l.length>=3&&c("end",{}),r(),!1)}}]),a}(Bt),Jt={red:"#B03060",orange:"#FE9A76",yellow:"#FFD700",olive:"#32CD32",green:"#016936",teal:"#008080",blue:"#0E6EB8",violet:"#EE82EE",purple:"#B413EC",pink:"#FF1493",brown:"#A52A2A",gray:"#A0A0A0",black:"#000000"};function Yt(e){return{lat:e.lat,lng:e.lng}}function Qt(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}var Zt=["red","blue","green","violet","orange","brown","yellow","olive","teal","purple","pink","black"],Kt=7;var Xt=function(e){var t=function(t){Object(s.a)(n,t);var a=Object(u.a)(n);function n(){return Object(o.a)(this,n),a.apply(this,arguments)}return Object(c.a)(n,[{key:"calcBounds",value:function(){var e=Nt.CRS.Simple,t=this.props,a=t.height,n=t.width;if(!a||!n)return null;var r=e.unproject({x:0,y:a},Kt-1),l=e.unproject({x:n,y:0},Kt-1);return new Nt.LatLngBounds(r,l)}},{key:"render",value:function(){var t=this.props,a=t.forwardedRef,n=Object(x.a)(t,["forwardedRef"]),l=this.calcBounds();return l?r.a.createElement(e,Object.assign({bounds:l,ref:a},n)):null}}]),n}(n.PureComponent);return Object(n.forwardRef)(function(e,a){return r.a.createElement(t,Object.assign({},e,{forwardedRef:a}))})}(function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e,n){var l;return Object(o.a)(this,a),(l=t.call(this,e,n)).state={zoom:-1,selectedFigureId:null,cursorPos:{lat:0,lng:0},mouseDownFlag:!1,draggableView:!1},l.prevSelectedFigure=null,l.skipNextClickEvent=!1,l.mapRef=r.a.createRef(),l.handleChange=l.handleChange.bind(Object(ve.a)(l)),l.handleClick=l.handleClick.bind(Object(ve.a)(l)),l.handleMouseMove=l.handleMouseMove.bind(Object(ve.a)(l)),l}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e){var t=this.props.onSelectionChange,a=this.state.selectedFigureId;this.prevSelectedFigureId!==a&&t&&(this.prevSelectedFigureId=a,t(a))}},{key:"getSelectedFigure",value:function(){var e=this.state.selectedFigureId;return this.props.figures.find(function(t){return t.id===e})}},{key:"handleChange",value:function(e,t){var a=t.point,n=t.pos,r=t.figure,l=t.points,i=this.props,o=i.onChange,c=i.unfinishedFigure,s=!!c;switch(e){case"add":if(s){var u=c.points;u=it()(u,{$push:[a]}),o("unfinished",it()(c,{points:{$set:u}}))}else o("replace",it()(r,{points:{$splice:[[n,0,a]]}}));break;case"end":o("new",c);break;case"finishHandrawnLine":o("finishHandrawnLine",c);break;case"move":o("replace",it()(r,{points:{$splice:[[n,1,a]]}}));break;case"replace":o("replace",it()(r,{points:{$set:l}}));break;case"remove":o("replace",it()(r,{points:{$splice:[[n,1]]}}));break;default:throw new Error("unknown event type "+e)}}},{key:"handleClick",value:function(e){var t=!!this.props.unfinishedFigure;this.skipNextClickEvent?this.skipNextClickEvent=!1:t?this.handleChange("add",{point:Yt(e.latlng)}):t||this.setState({selectedFigureId:null})}},{key:"handleMouseMove",value:function(e){var t=!!this.props.unfinishedFigure;if(this.setState({cursorPos:e.latlng}),t&&this.state.mouseDownFlag)return this.setState({draggableView:!1,cursorPos:e.latlng}),void this.handleChange("add",{point:Yt(e.latlng)});t||this.setState({cursorPos:e.latlng})}},{key:"renderFigure",value:function(e,t){var a=this,n="bbox"===e.type?Gt:"polyline"===e.type?$t:Wt;return r.a.createElement(n,{key:e.id,figure:e,options:t,skipNextClick:function(){return a.skipNextClickEvent=!0}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.url,n=t.bounds,l=t.height,i=t.width,o=t.figures,c=t.unfinishedFigure,s=t.onChange,u=t.onReassignment,m=t.style,d=this.state,p=d.zoom,h=d.selectedFigureId,g=d.cursorPos,f=!!c,E=function(t,a){var n=e.mapRef.current.leafletElement;return n.latLngToLayerPoint(t).distanceTo(n.latLngToLayerPoint(a))},v=f?this.renderFigure(c,{finished:!1,editing:!1,interactive:!1,color:Jt[c.color],onChange:this.handleChange,calcDistance:E,newPoint:g}):null,b=function(e){return e.tracingOptions&&e.tracingOptions.enabled?function(e,t){var a=!1;"#"===e[0]&&(e=e.slice(1),a=!0);var n=parseInt(e,16),r=(n>>16)+t;r>255?r=255:r<0&&(r=0);var l=(n>>8&255)+t;l>255?l=255:l<0&&(l=0);var i=(255&n)+t;return i>255?i=255:i<0&&(i=0),(a?"#":"")+(i|l<<8|r<<16).toString(16)}(Jt[e.color],80):Jt[e.color]},y=o.map(function(t,a){return e.renderFigure(t,{editing:h===t.id&&!f,finished:!0,interactive:!f,sketch:t.tracingOptions&&t.tracingOptions.enabled,color:b(t),vertexColor:Jt[t.color],onSelect:function(){return e.setState({selectedFigureId:t.id})},onChange:e.handleChange,calcDistance:E})}),w=r.a.createElement(Ft.a,{keyName:"backspace,del,c,f,-,=,left,right,up,down,space",onKeyDown:function(t){var a=document.activeElement?document.activeElement.tagName.toLowerCase():null;if(["input","textarea"].includes(a))return!1;if(f){if("f"===t){var n=c.type,r=c.points;("polygon"===n||"polyline"===n)&&r.length>=3&&e.handleChange("end",{})}"space"===t&&e.setState({draggableView:!0,drawing:!1})}else"c"===t?h&&e.getSelectedFigure()&&u(e.getSelectedFigure().type):"backspace"!==t&&"del"!==t||h&&e.getSelectedFigure()&&s("delete",e.getSelectedFigure());var l=e.mapRef.current.leafletElement;"left"===t&&l.panBy([80,0]),"right"===t&&l.panBy([-80,0]),"up"===t&&l.panBy([0,80]),"down"===t&&l.panBy([0,-80]),"="===t&&l.setZoom(l.getZoom()+1),"-"===t&&l.setZoom(l.getZoom()-1),"space"===t&&e.setState({draggableView:!0})},onKeyUp:function(t){"space"===t&&e.setState({draggableView:!1})}}),k=null,C=this.getSelectedFigure();if(C&&"polygon"===C.type){var x={id:"trace",type:"line",points:C.tracingOptions&&C.tracingOptions.trace||[]},j={editing:!1,finished:!0,color:Jt[C.color]};k=r.a.createElement(Wt,{figure:x,options:j})}if(C&&"polyline"===C.type){var O={id:"trace",type:"line",points:C.tracingOptions&&C.tracingOptions.trace||[]},S={editing:!1,finished:!0,color:Jt[C.color]};k=r.a.createElement($t,{figure:O,options:S})}return r.a.createElement("div",{style:Object(H.a)({cursor:f?"crosshair":this.state.draggableView?"grab":"auto",height:"100%"},m)},r.a.createElement(_t.a,{crs:Nt.CRS.Simple,zoom:p,minZoom:-50,maxZoom:Kt,center:[l/2,i/2],zoomAnimation:!1,zoomSnap:.1,zoomControl:!1,keyboard:!1,attributionControl:!1,onClick:this.handleClick,onZoom:function(t){return e.setState({zoom:t.target.getZoom()})},onMouseMove:this.handleMouseMove,onMouseDown:function(t){return e.setState({mouseDownFlag:!0})},onMouseUp:function(t){return e.setState({mouseDownFlag:!1})},dragging:this.state.draggableView,ref:this.mapRef},r.a.createElement(Pt.a,{position:"bottomright"}),r.a.createElement(Ht.a,{className:"leaflet-bar",position:"bottomright"},r.a.createElement("a",{role:"button",title:"Zoom reset",onClick:function(){var t=e.mapRef.current.leafletElement;t.setView(t.options.center,t.options.zoom)}},r.a.createElement(B.a,{name:"redo",fitted:!0,style:{fontSize:"1.2em"}})),r.a.createElement("a",{role:"button",title:"Hand",onClick:function(){e.setState({draggableView:!e.state.draggableView})}},r.a.createElement(B.a,{name:this.state.draggableView?"stop":"hand pointer outline",fitted:!0,style:{fontSize:"1.2em"}}))),r.a.createElement(Tt.a,{url:a,bounds:n}),v,k,y,w))}}]),a}(n.Component)),ea={height:"100vh",overflowY:"auto",overflowX:"hidden",borderRight:"1px solid #ccc"},ta={fontSize:"0.8em",float:"right"};function aa(e){var t=e.labels,a=e.onClose,n=t.map(function(e,t){return r.a.createElement(Ie.a.Row,{key:e},r.a.createElement(Ie.a.Cell,null,e),r.a.createElement(Ie.a.Cell,null,t))});return r.a.createElement("div",{style:ea},r.a.createElement(Ke.a,{as:"h2",attached:"top"},"Hotkeys",r.a.createElement(B.a,{link:!0,name:"close",style:ta,onClick:a})),r.a.createElement(d.a,{attached:!0},r.a.createElement(Ke.a,{as:"h3"}," Labels "),r.a.createElement(Ie.a,{celled:!0},r.a.createElement(Ie.a.Header,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.HeaderCell,null,"Action"),r.a.createElement(Ie.a.HeaderCell,null,"Key"))),r.a.createElement(Ie.a.Body,null,n)),r.a.createElement(Ke.a,{as:"h3"}," General "),r.a.createElement(Ie.a,{celled:!0},r.a.createElement(Ie.a.Header,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.HeaderCell,null,"Action"),r.a.createElement(Ie.a.HeaderCell,null,"Key"))),r.a.createElement(Ie.a.Body,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,"Complete shape"),r.a.createElement(Ie.a.Cell,null,"f")),r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,"Change label"),r.a.createElement(Ie.a.Cell,null,"c")),r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,"Delete figure"),r.a.createElement(Ie.a.Cell,null,"Delete")),r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,"Cancel selection"),r.a.createElement(Ie.a.Cell,null,"Escape")),r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,"Undo the edit"),r.a.createElement(Ie.a.Cell,null,"Ctrl+Z")),r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,"Move Image"),r.a.createElement(Ie.a.Cell,null,"Spacebar")))),r.a.createElement(Ke.a,{as:"h3"}," Navigation "),r.a.createElement(Ie.a,{celled:!0},r.a.createElement(Ie.a.Header,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.HeaderCell,null,"Action"),r.a.createElement(Ie.a.HeaderCell,null,"Key"))),r.a.createElement(Ie.a.Body,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,"Zoom In"),r.a.createElement(Ie.a.Cell,null,"+/=")),r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,"Zoom Out"),r.a.createElement(Ie.a.Cell,null,"-")),r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.Cell,null,"Move the Image"),r.a.createElement(Ie.a.Cell,null,"\u2190\u2192\u2191\u2193"))))))}var na=a(655),ra=a(138),la={fontSize:"0.8em",float:"right"},ia=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.onSelect,n=e.labels,l=e.selected,i=e.toggles,o=e.onToggle,c=e.filter,s=e.style,u=e.openHotkeys,m=e.onBack,d=e.onSkip,p=e.onSubmit,h=e.labelData,g=e.onFormChange,f=e.models,E=e.makePrediction,v=e.imageName,b=u?r.a.createElement(B.a,{link:!0,name:"keyboard",style:la,onClick:u}):null,y=function(e){var t=e.type,n=e.id;return"bbox"===t||"polygon"===t||"polyline"===t?function(){return a(n)}:null};return r.a.createElement("div",{style:Object(H.a)({display:"flex",flexDirection:"column",padding:"1em 0.5em",borderRight:"1px solid #ccc",height:"100%"},s)},r.a.createElement(Ke.a,{size:"large",style:{flex:"0 0 auto"}},t,b),r.a.createElement(Ke.a,{size:"medium"},v),r.a.createElement(tt.a,{divided:!0,selection:!0,style:{flex:1,overflowY:"auto"}},n.map(function(e,t){return function(e){var t=e.shortcut,a=e.label,n=e.onSelect,l=e.onToggle,i=e.color,o=e.selected,c=void 0!==o&&o,s=e.disabled,u=void 0!==s&&s,m=e.isToggled,d=void 0!==m&&m,p=e.labelData,h=e.onFormChange,g=e.models,f=e.makePrediction,E=[];l&&ca[a.type]&&E.push(r.a.createElement(q.a,{key:"visibility-icon",icon:d?"eye":"eye slash",style:{padding:5},onClick:function(e){l(a),e.stopPropagation()}}));var v=oa[a.type],b=v?r.a.createElement(B.a,{key:"type-icon",name:v,style:{opacity:.5,display:"inline-block",marginLeft:5}}):null;return r.a.createElement(tt.a.Item,{onClick:n,disabled:u,active:c,key:a.id,style:{fontSize:"1.3em"}},r.a.createElement(Ft.a,{keyName:t,onKeyDown:function(){return!u&&n&&n()}},r.a.createElement(ra.a,{color:i,horizontal:!0},t),a.name,b,r.a.createElement("span",{style:{float:"right"}},E),function(e){var t={fontSize:"12px"};if("text"===e.type){var a=(g||[]).filter(function(e){var t=e.type;return"object_classification"===t}),n=a.map(function(e){var t=e.id,a=e.name;return{value:t,text:a}}),l=a.length>0?r.a.createElement("div",null,"Fill in using a model prediction:",r.a.createElement(na.a,{options:n,placeholder:"Select a model",onChange:function(){var t=Object(Pe.a)(Ne.a.mark(function t(a,n){var r,l,i;return Ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.value,l=g.find(function(e){var t=e.id;return t===r}),t.next=4,f(l);case 4:i=t.sent.join(", "),h(e.id,[i]);case 6:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()})):null;return r.a.createElement(tt.a,{style:t},r.a.createElement(tt.a.Item,null,r.a.createElement(se.a,null,r.a.createElement(se.a.Input,{label:e.prompt,style:{width:"100%"},value:p[0]||"",onChange:function(t,a){var n=a.value;return h(e.id,[n])}}),l)))}if("select"===e.type){var i=e.options,o=function(t){return function(a,n){var r=n.checked;return h(e.id,r?p.concat([t]):p.filter(function(e){return e!==t}))}},c=i.map(function(e){return r.a.createElement(tt.a.Item,{key:e},r.a.createElement(Se.a,{label:e,checked:-1!==p.indexOf(e),onChange:o(e)}))});return r.a.createElement(tt.a,{style:t},c)}if("select-one"===e.type){var s=e.options,u=s.map(function(t){return r.a.createElement(tt.a.Item,{key:t},r.a.createElement(Et.a,{label:t,checked:-1!==p.indexOf(t),onChange:function(a,n){n.checked;return h(e.id,[t])}}))});return r.a.createElement(tt.a,{style:t},u)}return null}(a)))}({shortcut:"1234567890qwe"[t],label:e,color:Zt[t],onSelect:y(e),selected:l===e.id,disabled:!!c&&!c(e),onToggle:o,isToggled:i&&i[e.id],labelData:h[e.id],onFormChange:g,models:f,makePrediction:E})}),r.a.createElement(Ft.a,{keyName:"esc",onKeyDown:function(){return a(null)}})),r.a.createElement("div",{style:{flex:"0 0 auto",display:"flex"}},r.a.createElement(q.a,{onClick:m},"Back"),r.a.createElement("span",{style:{flex:1}}),r.a.createElement(q.a,{secondary:!0,onClick:d},"Skip"),r.a.createElement(q.a,{primary:!0,onClick:p},"Submit")))}}]),a}(n.PureComponent),oa={bbox:"object ungroup outline",polygon:"pencil alternate",polyline:"pencil alternate"},ca={bbox:!0,polygon:!0,polyline:!0,text:!1,select:!1,"select-one":!1};var sa={width:"100%",background:"#fcfcfc",minHeight:40,borderBottom:"1px solid #ccc",padding:"10px 15px"},ua=[{value:.3,text:"Slight"},{value:.6,text:"Normal"},{value:1.2,text:"Strong"},{value:1.6,text:"Extreme"}],ma=[{value:0,text:"1x1"},{value:1,text:"3x3"},{value:2,text:"5x5"}],da={marginLeft:10},pa={marginLeft:20},ha=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.style,a=e.enabled,n=e.smoothing,l=e.precision,i=e.onChange,o={compact:!0,disabled:!a,style:da,onChange:function(e,t){var a=t.name,n=t.value;return i(a,n)}};return r.a.createElement("div",{style:Object(H.a)({},t,{},sa)},r.a.createElement(Et.a,{label:"Auto-tracing",toggle:!0,checked:a,onChange:function(e,t){var a=t.checked;return i("enabled",a)}}),r.a.createElement("span",{style:{marginLeft:100}},r.a.createElement("span",{style:pa},"Smoothing:",r.a.createElement(na.a,Object.assign({},o,{name:"smoothing",value:n,options:ua}))),r.a.createElement("span",{style:pa},"Anchor precision:",r.a.createElement(na.a,Object.assign({},o,{name:"precision",value:l,options:ma})))))}}]),a}(n.PureComponent),ga=[{value:1,text:"Slight"},{value:2.5,text:"Normal"},{value:5,text:"Strong"},{value:10,text:"Extreme"}],fa={},Ea=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={model:fa.model||e.models[0].id,smoothing:fa.smoothing||ga[1].value,loading:!1},n}return Object(c.a)(a,[{key:"handleGenerate",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t,a){return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.props.generate(t,{smoothing:a});case 3:this.setState({loading:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.style,n=t.models,l=this.state,i=l.model,o=l.smoothing,c=l.loading,s={style:da,onChange:function(t,a){var n=a.name,r=a.value;e.setState(Object(Ee.a)({},n,r)),fa[n]=r}},u=n.map(function(e){return{value:e.id,text:e.name}}),m=n.find(function(e){return e.id===i}),d="semantic_segmentation"===m.type?r.a.createElement("span",{style:pa},"Smoothing:",r.a.createElement(na.a,Object.assign({},s,{name:"smoothing",value:o,options:ga}))):null,p="object_classification"===m.type,h=p?"This model can only be used to generate general tags for text fields.":null;return r.a.createElement("div",{style:Object(H.a)({},a,{},sa)},r.a.createElement("span",{style:pa},"Generate selections using a model",r.a.createElement(na.a,Object.assign({},s,{name:"model",value:i,options:u}))),d,r.a.createElement("span",{style:pa},r.a.createElement(q.a,{disabled:p,onClick:function(){return e.handleGenerate(m,o)}},"Generate"),r.a.createElement(Qe.a,{active:c,inline:!0}),r.a.createElement("span",null,h)))}}]),a}(n.Component),va={flex:"0 0 auto",maxHeight:300,padding:"0 10px",textAlign:"center",borderBottom:"1px solid #ccc"},ba={margin:"0 auto",maxHeight:250};function ya(e){var t=e.referenceLink,a=e.referenceText;if(!a&&!t)return null;var n=t?r.a.createElement("img",{alt:"Reference",src:t,style:ba}):null;return r.a.createElement("div",{style:va},n,r.a.createElement("p",null,a))}a(641);var wa=a(100),ka=a(373),Ca=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e,n){return Object(o.a)(this,a),t.call(this,function(t,a){return-e(t,a)},n)}return Object(c.a)(a,[{key:"maxElementId",value:function(){throw new Error("Cannot call maxElementId on MinHeap")}},{key:"minElementId",value:function(){return Object(ka.a)(Object(wa.a)(a.prototype),"maxElementId",this).call(this)}}]),a}(function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object(o.a)(this,e),"function"!==typeof t)throw new Error("Passed comparator is invalid, should be a comparison function");this._comparator=t,this._heapIdx=new Map,this._heap=[],Array.isArray(a.initData)&&this._initFromData(a.initData)}return Object(c.a)(e,[{key:"_initFromData",value:function(e){var t=this;if(this._heap=e.map(function(e){return{id:e.id,value:e.value}}),e.forEach(function(e,a){var n=e.id;return t._heapIdx.set(n,a)}),e.length)for(var a=Oa(e.length-1);a>=0;a--)this._downHeap(a)}},{key:"_downHeap",value:function(e){for(;xa(e)<this.size();){var t=xa(e),a=ja(e),n=e;if(t<this.size()&&(n=this._maxIndex(n,t)),a<this.size()&&(n=this._maxIndex(n,a)),n===e)break;this._swap(n,e),e=n}}},{key:"_upHeap",value:function(e){for(;e>0;){var t=Oa(e);if(this._maxIndex(t,e)!==e)break;this._swap(t,e),e=t}}},{key:"_maxIndex",value:function(e,t){var a=this._get(e),n=this._get(t);return this._comparator(a,n)>=0?e:t}},{key:"_get",value:function(e){return this._heap[e].value}},{key:"_swap",value:function(e,t){var a=this._heap[e],n=this._heap[t];this._heapIdx.set(a.id,t),this._heapIdx.set(n.id,e),this._heap[e]=n,this._heap[t]=a}},{key:"get",value:function(e){return this.has(e)?this._get(this._heapIdx.get(e)):null}},{key:"set",value:function(e,t){if(this.has(e)){if(this.get(e)===t)return;var a=this._heapIdx.get(e);this._heap[a].value=t,this._upHeap(a),this._downHeap(a)}else this._heapIdx.set(e,this._heap.length),this._heap.push({id:e,value:t}),this._upHeap(this._heap.length-1)}},{key:"remove",value:function(e){if(this.has(e)){var t=this._heap.length-1,a=this._heapIdx.get(e);a!==t?(this._swap(a,t),this._heap.pop(),this._heapIdx.delete(e),this._upHeap(a),this._downHeap(a)):(this._heap.pop(),this._heapIdx.delete(e))}}},{key:"has",value:function(e){return this._heapIdx.has(e)}},{key:"empty",value:function(){return!this.size()}},{key:"clear",value:function(){this._heap=[],this._heapIdx=new Map}},{key:"forEach",value:function(e){this._heap.forEach(function(t){return e(t.value,t.id)})}},{key:"size",value:function(){return this._heap.length}},{key:"setDefault",value:function(e,t){return this.has(e)?this.get(e):(this.set(e,t),t)}},{key:"maxElementId",value:function(){return this.size()?this._heap[0].id:null}},{key:"_selfCheck",value:function(){for(var e=1;e<this._heap.length;e++)if(this._maxIndex(Oa(e),e)!==Oa(e))throw new Error("An item with id ".concat(this._heap[e].id)+" has a parent younger than it: "+this._heap[Oa(e)].id)}}]),e}()),xa=function(e){return 2*e+1},ja=function(e){return 2*e+2},Oa=function(e){return e-1>>1};var Sa=1;function Ia(e){var t=e.points,a=e.height,n=e.width,r=e.imageData,l=e.markRadius;function i(e,t){return 4*n*(a-t)+4*e}function o(e){return{x:e%(4*n)/4,y:a-Math.floor(e/(4*n))}}console.log("points",t),console.log("height",a),console.log("width",n),console.log("imageData",r),console.log("markRadius",l),l=void 0===l?Sa:l;var c,s,u=t.map(function(e){var t=e.x,r=e.y;t=Math.floor(t),r=Math.floor(r);for(var i=[],o=-l;o<=l;o++)for(var c=-l;c<=l;c++){var s={x:t+o,y:r+c};Da(s,a,n)&&i.push(s)}return i}).map(function(e){return new Set(e.map(function(e){return i(e.x,e.y)}))});function m(e,t,l){c={x:1/0,y:1/0},s={x:-1/0,y:-1/0};var u,m=Object(_e.a)(l);try{for(m.s();!(u=m.n()).done;){var d=o(u.value);c.x=Math.min(c.x,d.x),c.y=Math.min(c.y,d.y),s.x=Math.max(s.x,d.x),s.y=Math.max(s.y,d.y)}}catch(E){m.e(E)}finally{m.f()}var p,h=Object(_e.a)(e);try{for(h.s();!(p=h.n()).done;){var g=o(p.value);c.x=Math.min(c.x,g.x),c.y=Math.min(c.y,g.y),s.x=Math.max(s.x,g.x),s.y=Math.max(s.y,g.y)}}catch(E){h.e(E)}finally{h.f()}function f(e,t,a,n){for(var l=0,i=0;i<3;i++){var o=(r[e+i]+r[t+i])/2,c=(r[a+i]+r[n+i])/2,s=Math.abs(o-c);l+=s*s}return l}c.x-=3,c.y-=3,s.x+=3,s.y+=3;return function(e,t,a,n){var r,l=new Ca(function(e,t){return e-t}),i=new Map,o=new Map,c=Object(_e.a)(e);try{for(c.s();!(r=c.n()).done;){var s=Object(Te.a)(r.value,2),u=s[0],m=s[1];l.set(u,m),o.set(u,m)}}catch(E){c.e(E)}finally{c.f()}for(var d=new Set(t.entries()),p=function(){var e=l.minElementId(),r=l.get(e);l.remove(e),d.has(e)&&d.delete(e),n(e).forEach(function(n){var c=o.has(n)?o.get(n):1/0,s=a(e,n);r+s<=c&&(l.set(n,r+s),o.set(n,r+s),t.has(n)&&d.add(n),i.set(n,e))})};!l.empty()&&d.size>0;)p();return Array.from(t).map(function(e){for(var t=[],a=e;null!==a;)t.push(a),a=i.has(a)?i.get(a):null;return{id:e,path:t.reverse(),distance:o.get(e)}})}(t,l,function(e,t){var a=o(e),n=o(t);if(a.x===n.x)return 1e6-f(i(a.x-1,a.y),i(a.x-1,n.y),i(a.x+1,a.y),i(a.x+1,n.y));if(a.y===n.y)return 1e6-f(i(a.x,a.y-1),i(n.x,n.y-1),i(a.x,a.y+1),i(n.x,n.y+1));var r=i(a.x,n.y),l=i(n.x,a.y),c=f(r,r,l,l);return 1e6-Math.floor(c/1.414)},function(e){for(var t=o(e),r=[],l=-1;l<=1;l++)for(var u=-1;u<=1;u++)(l||u)&&r.push({x:t.x+l,y:t.y+u});return r.filter(function(e){return Da(e,a,n)}).filter(function(e){return e.x>=c.x&&e.x<=s.x&&e.y>=c.y&&e.y<=s.y}).map(function(e){return i(e.x,e.y)})})}var d,p=new Map,h=Object(_e.a)(u[0]);try{for(h.s();!(d=h.n()).done;){var g=d.value;p.set(g,0)}}catch(y){h.e(y)}finally{h.f()}var f=[];u.forEach(function(e,t){if(t){var a=m(u[t-1],p,e);f.push(a),p=new Map,a.forEach(function(e){var t=e.id,a=e.distance;return p.set(t,a)})}});var E,v=1/0;f[f.length-1].forEach(function(e){var t=e.id,a=e.distance;v>a&&(v=a,E=t)});var b=[];return f.reverse(),f.forEach(function(e){var t=null;e.forEach(function(e){e.id===E&&(t=e)}),t&&(b=t.path.concat(b),E=t.path[0])}),b.map(function(e){return o(e)})}function Da(e,t,a){return e.x>=0&&e.x<a&&e.y>=0&&e.y<t}var Ra=[[1,0],[0,-1],[-1,0],[0,1]],Aa={DOWN:0,LEFT:1,UP:2,RIGHT:3},La=[-1,Aa.DOWN,Aa.RIGHT,Aa.RIGHT,Aa.UP,-1,Aa.UP,Aa.UP,Aa.LEFT,Aa.DOWN,-1,Aa.RIGHT,Aa.LEFT,Aa.DOWN,Aa.LEFT,-1];function Fa(e,t,a){var n=t.length,r=t[0].length,l=[];l.push(e);for(var i=0,o=0;o<l.length;o++){var c=l[o];i++;for(var s=0;s<Ra.length;s++){var u=[c[0]+Ra[s][0],c[1]+Ra[s][1]];u[0]>=0&&u[0]<n&&u[1]>=0&&u[1]<r&&!t[u[0]][u[1]]&&a[u[0]][u[1]]===a[e[0]][e[1]]&&(t[u[0]][u[1]]=!0,l.push(u))}}if(i<n*r*.002)return null;var m=[e],d=Aa.RIGHT,p=e;function h(t){var l=Object(Te.a)(t,2),i=l[0],o=l[1],c=Object(Te.a)(e,2),s=c[0],u=c[1],m=0;return o>0&&i>0&&a[i-1][o-1]===a[s][u]&&(m|=1),m<<=1,i>0&&o<r&&a[i-1][o]===a[s][u]&&(m|=1),m<<=1,i<n&&o<r&&a[i][o]===a[s][u]&&(m|=1),m<<=1,i<n&&o>0&&a[i][o-1]===a[s][u]&&(m|=1),m}for(;;){var g=[p[0]+Ra[d][0],p[1]+Ra[d][1]];if(m.push(g),g[0]===e[0]&&g[1]===e[1])break;var f=h(g),E=La[f];-1===E&&(E=(d+1)%4),d=E,p=g}return m}function Na(e,t,a){var n=t.height,r=t.width,l=t.imageData,i=a.smoothing,o=a.precision;(e=e.slice()).push(e[0]);var c=Ia({points:e.map(function(e){return{x:e.lng,y:e.lat}}),height:n,width:r,imageData:l,markRadius:o});return Nt.LineUtil.simplify(c,i||.6).map(function(e){return{lng:e.x,lat:e.y}})}function _a(e,t){var a=t.scaling,n=t.smoothing;return a=a||1,n=n||2,function(e){for(var t=e.length,a=e[0].length,n=e.map(function(e){return e.map(function(){return!1})}),r=[],l=0;l<t;l++)for(var i=0;i<a;i++)n[l][i]||0===e[l][i]||r.push(Fa([l,i],n,e));return r.filter(function(e){return!!e})}(e=e.map(function(e){return e.map(function(e){return e[0]})})).map(function(t){return Nt.LineUtil.simplify(t.map(function(t){var a=Object(Te.a)(t,2),n=a[0];return{x:a[1],y:e.length-n}}),n).map(function(e){var t=e.x,n=e.y;return{lng:t/a,lat:n/a}})})}var Pa,Ta=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a),n=t.call(this,e);var l=e.labels,i={};return l.map(function(e){return i[e.id]=!0}),n.state={selected:null,toggles:i,selectedFigureId:null,reassigning:{status:!1,type:null},hotkeysPanel:!1,imageName:""},n.handleChange=n.handleChange.bind(Object(ve.a)(n)),n.handleSelected=n.handleSelected.bind(Object(ve.a)(n)),n.handleSelectionChange=n.handleSelectionChange.bind(Object(ve.a)(n)),n.canvasRef=r.a.createRef(),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(this.props.externalImageUrl&&this.props.externalImageUrl.indexOf(!1)){var t=this.props.externalImageUrl.replace("https://drive.google.com/uc?export=view&id=","");S("GET","".concat("http://localhost:8081","/api/images/drive/getFileMetadata?fileId=").concat(t)).then(function(t){e.setState({imageName:t.name})}).catch(function(e){console.log(e)})}}},{key:"handleSelected",value:function(e){var t=this;if(e!==this.state.selected){var a=this.props.pushState;if(e){var n=this.props.labels,r=n.findIndex(function(t){return t.id===e}),l=n[r].type,i=Zt[r];a(function(e){return{unfinishedFigure:{id:null,color:i,type:l,points:[]}}},function(){return t.setState({selected:e})})}else a(function(e){return{unfinishedFigure:null}},function(){return t.setState({selected:e})})}}},{key:"handleSelectionChange",value:function(e){e?this.setState({selectedFigureId:e}):this.setState({reassigning:{status:!1,type:null},selectedFigureId:null})}},{key:"handleChange",value:function(e,t,a){var n=this;if(t.color){var r=this.props,l=r.labels,i=r.figures,o=r.pushState,c=r.height,s=r.width,u=r.imageData,m="gray"===t.color?{id:"__temp"}:l[Zt.indexOf(t.color)],d=(i[m.id]||[]).findIndex(function(e){return e.id===t.id});switch(e){case"new":console.log("figure points",t.points),o(function(e){return{figures:it()(e.figures,Object(Ee.a)({},m.id,{$push:[{id:t.id||Qt(),type:t.type,points:t.points}]})),unfinishedFigure:null}},function(){return n.setState({selected:null})});break;case"finishHandrawnLine":o(function(e){return{figures:it()(e.figures,Object(Ee.a)({},m.id,{$push:[{id:t.id||Qt(),type:t.type,points:t.points}]})),unfinishedFigure:null}},function(){return n.setState({selected:null})});break;case"replace":o(function(e){var a=t.tracingOptions;if(a&&a.enabled){var n={height:c,width:s,imageData:u};a=Object(H.a)({},a,{trace:Na(t.points,n,a)})}else a=Object(H.a)({},a,{trace:[]});return{figures:it()(e.figures,Object(Ee.a)({},m.id,{$splice:[[d,1,{id:t.id,type:t.type,points:t.points,tracingOptions:a}]]}))}});break;case"delete":o(function(e){return{figures:it()(e.figures,Object(Ee.a)({},m.id,{$splice:[[d,1]]}))}});break;case"unfinished":o(function(e){return{unfinishedFigure:t}},function(){var e=n.props.unfinishedFigure,t=e.type,a=e.points;"bbox"===t&&a.length>=2&&n.handleChange("new",e)});break;case"recolor":if(m.id===a)return;o(function(e){var n;return{figures:it()(e.figures,(n={},Object(Ee.a)(n,m.id,{$splice:[[d,1]]}),Object(Ee.a)(n,a,{$push:[{id:t.id,points:t.points,type:t.type,tracingOptions:t.tracingOptions}]}),n))}});break;default:throw new Error("unknown event type "+e)}}}},{key:"render",value:function(){var e=this,t=this.props,a=t.labels,l=t.imageUrl,i=t.reference,o=t.onBack,c=t.onSkip,s=t.onSubmit,u=t.pushState,m=t.popState,d=t.figures,p=t.unfinishedFigure,h=t.height,g=t.width,f=t.models,E=t.makePrediction,v=this.state,b=v.selected,y=v.selectedFigureId,w=v.reassigning,k=v.toggles,C=v.hotkeysPanel,x={onBack:o,onSkip:c,onSubmit:s,models:f,makePrediction:E},j=null,O=[];a.forEach(function(e,t){d[e.id].forEach(function(a){!k[e.id]||"bbox"!==e.type&&"polygon"!==e.type&&"polyline"!==e.type||(O.push({color:Zt[t],points:a.points,id:a.id,type:a.type,tracingOptions:a.tracingOptions}),a.id===y&&(j=Object(H.a)({},a,{color:Zt[t]})))})}),d.__temp.forEach(function(e){O.push(Object(H.a)({color:"gray"},e))});var S=w.status?{title:"Select the new label",selected:null,onSelect:function(t){var a=e.canvasRef.current.getSelectedFigure();a&&e.handleChange("recolor",a,t),e.setState({reassigning:{status:!1,type:null}})},filter:function(e){return e.type===w.type},labelData:d,imageName:this.state.imageName}:{title:"Labeling",selected:b,onSelect:this.handleSelected,toggles:k,onToggle:function(t){return e.setState({toggles:it()(k,Object(Ee.a)({},t.id,{$set:!k[t.id]}))})},openHotkeys:function(){return e.setState({hotkeysPanel:!0})},onFormChange:function(e,t){return u(function(a){return{figures:it()(d,Object(Ee.a)({},e,{$set:t}))}})},labelData:d,imageName:this.state.imageName},I=C?r.a.createElement(aa,{labels:a.map(function(e){return e.name}),onClose:function(){return e.setState({hotkeysPanel:!1})}}):null,D=null,R={position:"absolute",top:0,left:0,zIndex:1e4};if(!j||"polygon"!==j.type&&"polyline"!==j.type)!j&&f.length>0&&(D=r.a.createElement(Ea,{style:R,models:f,generate:function(){var t=Object(Pe.a)(Ne.a.mark(function t(a,n){var r;return Ne.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(a,n);case 2:r=t.sent,"object_classification"!==a.type&&r.forEach(function(t){return e.handleChange("new",t)});case 4:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}));else{var A=j.tracingOptions||{enabled:!1,smoothing:.3,precision:0,trace:[]};D=r.a.createElement(ha,Object.assign({style:R,onChange:function(t,a){e.handleChange("replace",it()(j,{tracingOptions:{$set:it()(A,Object(Ee.a)({},t,{$set:a}))}}))}},A))}var L=this.props.demo?r.a.createElement("div",{style:{width:"100%",flex:"0 0 auto",background:"#FFD700",padding:"5px 10px",fontWeight:800,textAlign:"center"}},"This is a demo page. The changes will not be saved and all network responses are static."," ",r.a.createElement("a",{target:"_blank",href:"https://github.com/Slava/label-tool"},"GitHub repo")):null;return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-hero",style:{minHeight:"75px",backgroundImage:"linear-gradient(45deg, rgb(229, 44, 78) 1%, rgb(233, 74, 99) 30%, rgb(174, 82, 157) 69%, rgb(154, 85, 177) 100%)",color:"white"}}),r.a.createElement("div",{style:{display:"flex",height:"92vh",flexDirection:"column"}},L,r.a.createElement("div",{style:{display:"flex",flex:1,height:"100%"}},r.a.createElement(Ft.a,{keyName:"ctrl+z",onKeyDown:m},r.a.createElement(ia,Object.assign({labels:a},S,x,{style:{flex:1,maxWidth:300}})),I,r.a.createElement("div",{style:{flex:4,display:"flex",flexDirection:"column"}},r.a.createElement(ya,i),r.a.createElement("div",{style:{position:"relative",height:"100%"}},D,r.a.createElement(Xt,{url:l,height:h,width:g,figures:O,unfinishedFigure:p,onChange:this.handleChange,onReassignment:function(t){return e.setState({reassigning:{status:!0,type:t}})},onSelectionChange:this.handleSelectionChange,ref:this.canvasRef,style:{flex:1}})))))))}}]),a}(n.Component),Ua=function(e){return function(t){Object(s.a)(n,t);var a=Object(u.a)(n);function n(e){var t;return Object(o.a)(this,n),(t=a.call(this,e)).state={height:null,width:null,imageData:null},t.componentDidUpdate({},t.state),t}return Object(c.a)(n,[{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.imageUrl,r=a.demo;if(n!==e.imageUrl){var l=new Image,i=this.setState.bind(this);l.onload=Object(Pe.a)(Ne.a.mark(function e(){var t,a,n;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.height,a=this.width,i({height:t,width:a}),n=function(){var e=document.getElementById("test-canvas"),n=e.getContext("2d"),o=r?.5:Math.min(800,t)/t,c=Math.floor(o*t),s=Math.floor(o*a);e.height=c,e.width=s,n.imageSmoothingQuality="high",n.imageSmoothingEnabled=!0,n.drawImage(l,0,0,s,c);var u=e.toDataURL().substring("data:image/png;base64,".length);e.height=t,e.width=a,n.drawImage(l,0,0,a,t);var m=n.getImageData(0,0,a,t).data;i({imageData:m,imgB64:u,b64Scaling:o})},"loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n);case 4:case"end":return e.stop()}},e,this)})),l.crossOrigin="Anonymous",l.alt="Image did not load",l.src=n}}},{key:"render",value:function(){var t=this.props,a=this.state,n=a.height,l=a.width,i=a.imageData,o=a.imgB64,c=a.b64Scaling;return n?r.a.createElement(e,Object.assign({height:n,width:l,imageData:i,imgB64:o,b64Scaling:c},t)):null}}]),n}(n.Component)}(function(e){return function(t){Object(s.a)(n,t);var a=Object(u.a)(n);function n(e){var t;Object(o.a)(this,n),t=a.call(this,e);var r=e.labelData,l=e.labels,i={};return l.map(function(e){return i[e.id]=[]}),i.__temp=[],Object.keys(r).forEach(function(e){i[e]=(i[e]||[]).concat(r[e])}),i=t.flipY(i),t.state={figures:i,unfinishedFigure:null,figuresHistory:[],unfinishedFigureHistory:[]},t.pushState=t.pushState.bind(Object(ve.a)(t)),t.popState=t.popState.bind(Object(ve.a)(t)),t}return Object(c.a)(n,[{key:"flipY",value:function(e){var t=this,a={};return Object.keys(e).forEach(function(n){a[n]=e[n].map(function(e){return"polygon"!==e.type&&"bbox"!==e.type&&"polyline"!==e.type?e:(a=e.tracingOptions&&e.tracingOptions.enabled?Object(H.a)({},e.tracingOptions,{trace:t.transformPoints(e.tracingOptions.trace)}):e.tracingOptions,Object(H.a)({},e,{points:t.transformPoints(e.points),tracingOptions:a}));var a})}),a}},{key:"transformPoints",value:function(e){var t=this.props.height;return e.map(function(e){var a=e.lat,n=e.lng;return{lat:t-a,lng:n}})}},{key:"componentDidUpdate",value:function(e,t){var a=this.props,n=a.onLabelChange,r=a.height,l=a.width,i=this.state.figures;i!==t.figures&&n({labels:this.flipY(i),height:r,width:l})}},{key:"pushState",value:function(e,t){this.setState(function(t){return Object(H.a)({figuresHistory:it()(t.figuresHistory,{$push:[t.figures]}),unfinishedFigureHistory:it()(t.unfinishedFigureHistory,{$push:[t.unfinishedFigure]})},e(t))},t)}},{key:"popState",value:function(){this.setState(function(e){var t=e.figuresHistory,a=e.unfinishedFigureHistory;if(!t.length)return{};t=t.slice(),a=a.slice();var n=t.pop(),r=a.pop();return r&&!r.points.length&&(r=null),{figures:n,unfinishedFigure:r,figuresHistory:t,unfinishedFigureHistory:a}})}},{key:"render",value:function(){var t=this.props,a=this.state,n={pushState:this.pushState,popState:this.popState,figures:a.figures,unfinishedFigure:a.unfinishedFigure};return r.a.createElement(e,Object.assign({},n,t))}}]),n}(n.Component)}((Pa=Ta,function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={models:[]},n.makePrediction=n.makePrediction.bind(Object(ve.a)(n)),n}return Object(c.a)(a,[{key:"makePrediction",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a,n,r,l,i,o,c,s,u,m,d,p,h=arguments;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>1&&void 0!==h[1]?h[1]:{},n=this.props,r=n.imgB64,l=n.b64Scaling,i=n.height,o=n.width,c=t.id,e.next=5,S("POST","".concat("http://localhost:8081","/api/mlmodels/").concat(c),{instances:[{input_bytes:{b64:r}}]});case 5:if(s=e.sent,"object_detection"!==t.type){e.next=12;break}return u=[],s.predictions.forEach(function(e){var a=Object(Te.a)(e.det_boxes,4),n=a[0],r=a[1],l=a[2],c=a[3];u.push({type:"bbox",color:"gray",points:[{lng:r*o,lat:(1-n)*i},{lng:c*o,lat:(1-l)*i}],id:Qt(),modelId:t.id})}),e.abrupt("return",u);case 12:if("semantic_segmentation"!==t.type){e.next=17;break}return m=s.predictions[0].raw_image,d=a.smoothing,p=_a(m,{scaling:l,smoothing:d}),e.abrupt("return",p.map(function(e){return{type:"polygon",color:"gray",points:e,id:Qt(),modelId:t.id}}));case 17:return e.abrupt("return",s.predictions);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("get","".concat("http://localhost:8081","/api/mlmodels"));case 2:t=e.sent,this.setState({models:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=this.state,a=(e.imgB64,Object(x.a)(e,["imgB64"])),n={models:t.models,makePrediction:this.makePrediction};return r.a.createElement(Pa,Object.assign({},n,a))}}]),a}(n.Component)))),Ha=a(367),za=a.n(Ha),Ma=a(368),qa=a.n(Ma),Ba=a(369),Wa=a.n(Ba),Ga={"/api/images/getLabelingInfo":function(e){var t=[{lat:309.045449970124,lng:625.3817609078532},{lat:389.39416927673574,lng:636.0189083788734},{lat:391.74775348325585,lng:630.3874266468058},{lat:418.2995456637876,lng:649.6483578597326},{lat:442.7837802564911,lng:650.5189084230287},{lat:456.5065601296597,lng:656.2611489389324},{lat:457.14786455087716,lng:675.4384182973803},{lat:427.1138701171609,lng:687.190850901878},{lat:416.01435043513527,lng:680.9881781383931},{lat:404.63825712075703,lng:700.754498022768},{lat:348.10066020274917,lng:706.2554371527104},{lat:307.3043488435318,lng:713.6338242619977},{lat:297.63517780645657,lng:707.2677077164033},{lat:301.754589002519,lng:699.4873776084357},{lat:343.34918202031685,lng:694.0881597393285},{lat:263.2327265766655,lng:699.2697399676117},{lat:226.99605937946436,lng:680.4440840363329},{lat:193.5886815129756,lng:683.2733733670453},{lat:194.45923207627172,lng:663.7948045132946},{lat:252.89493863752404,lng:653.5658353945652},{lat:282.2760201487682,lng:653.7834730353892},{lat:278.79381789558374,lng:625.9258550099132}].map(function(e){return{lat:700-e.lat,lng:e.lng}}),a=[{lat:200.46477246638622,lng:770.3928381027434},{lat:202.93964620053913,lng:761.9075567285049},{lat:213.72302461363398,lng:760.4933431661318},{lat:226.62772337028846,lng:764.9127605485477},{lat:275.7716446627535,lng:754.1293821354528},{lat:344.8913325237385,lng:759.432682994352},{lat:371.23106012293744,lng:760.6701198614285},{lat:381.48410845014234,lng:741.5782367693917},{lat:400.3992148468825,lng:743.346003722358},{lat:401.63665171395894,lng:739.2801397305354},{lat:436.28488399209976,lng:750.9474016201134},{lat:450.6037963111274,lng:780.1155563440585},{lat:479.41839764447917,lng:770.5696147980401},{lat:493.9140866588034,lng:778.7013427816854},{lat:493.3837565729135,lng:798.853886045502},{lat:483.3074849410052,lng:808.5766042868171},{lat:469.51890270786754,lng:806.2785072479608},{lat:462.2710582007054,lng:798.853886045502},{lat:450.780573006424,lng:799.5609928266886},{lat:440.5275246792191,lng:828.9059242459302},{lat:423.291796887797,lng:834.386001800126},{lat:406.05606909637487,lng:839.8660793543218},{lat:402.3437584951455,lng:835.0931085813125},{lat:379.716341497176,lng:842.5177297837713},{lat:355.85148763213004,lng:844.2854967367377},{lat:346.39393443375997,lng:847.7326422950221},{lat:343.56550730901375,lng:844.8158268226276},{lat:325.35750769346015,lng:846.6719821232423},{lat:319.9658184869127,lng:841.4570696119915},{lat:324.38523586932865,lng:826.607827207074},{lat:336.59783310277044,lng:834.731484905481},{lat:352.07604580659114,lng:835.3908786715936},{lat:369.1758521514147,lng:829.5128759753552},{lat:386.2756584962383,lng:823.6348732791167},{lat:353.38624554456584,lng:822.2353237918115},{lat:317.69773361828294,lng:825.2676810143062},{lat:253.50359574886406,lng:826.0655287481668},{lat:204.2428073372761,lng:815.8344419242217},{lat:190.22242909705494,lng:826.0655287481668},{lat:186.85493641000312,lng:813.560867074456},{lat:189.08564167217213,lng:801.0562054007453},{lat:194.76957879658613,lng:795.7511974179589},{lat:258.42967459002284,lng:804.087638533766},{lat:316.7847624006732,lng:795.3722682763313},{lat:274.99975551549045,lng:781.1453633343426},{lat:238.34643008376008,lng:783.2465357442481}].map(function(e){return{lat:700-e.lat,lng:e.lng}});return{ok:!0,status:200,json:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{project:{id:"demo",name:"Test Project",referenceText:null,referenceLink:null,form:{formParts:[{id:"mzs64divv",name:"Human",type:"polygon"},{id:"ywx7emnqc",name:"Shoes",type:"bbox"},{id:"qvjf23y51",name:"Image quality",type:"select-one",options:["Bad","Okay","Excellent"]}]}},image:{id:1,originalName:"demo.jpg",link:za.a,externalLink:null,localPath:null,labeled:0,labelData:{labels:{mzs64divv:[{id:"hpctbyvju7k5t68znsphx3",type:"polygon",points:t,tracingOptions:{trace:[],enabled:!1,smoothing:1.2}},{id:"hpctbyvju7k5t68znsphx4",type:"polygon",points:a,tracingOptions:{trace:[],enabled:!1,smoothing:1.2}}]}},lastEdited:1552629203129,projectsId:"demo"}});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}},"/api/mlmodels":function(){return{ok:1,status:200,json:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:1,name:"object detection - faster_rcnn",url:"http://someserver.com/v1/models/faster_rcnn:predict",type:"object_detection"},{id:2,name:"semantic segmentation - deeplabv3",url:"http://someserver.com/v1/models/deeplabv3plus_xception65:predict",type:"semantic_segmentation"}]);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}},"/api/mlmodels/1":function(){return fetch(Wa.a)},"/api/mlmodels/2":function(){return fetch(qa.a)},"/api/images/1":function(){return{ok:1,status:200}}},Va=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={project:null,image:null,isLoaded:!1,error:null},n}return Object(c.a)(a,[{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(Object(Pe.a)(Ne.a.mark(function e(){var t,a,n,r,l,i=arguments;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.props.match.params.projectId,a=i.length,n=new Array(a),r=0;r<a;r++)n[r]=i[r];if("demo"!==t){e.next=5;break}return l="string"===typeof n[0]?n[0]:n[0].pathname,e.abrupt("return",Ga[l].apply(Ga,n));case 5:return e.next=7,fetch.apply(void 0,n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)})))},{key:"componentDidMount",value:function(){this.refetch()}},{key:"componentDidUpdate",value:function(e){e.match.params.imageId!==this.props.match.params.imageId&&this.refetch()}},{key:"refetch",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t,a,n,r,l,i,o,c,s;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoaded:!1,error:null,project:null,image:null}),t=this.props,a=t.match,n=t.history,r=a.params,l=r.projectId,i=r.imageId,e.prev=3,e.next=6,S("get","".concat("http://localhost:8081","/api/images/getLabelingInfo?projectId=").concat(l).concat(i?"&imageId=".concat(i):""));case 6:if(o=e.sent,c=o.project,s=o.image){e.next=12;break}return n.replace("/label/".concat(l,"/over")),e.abrupt("return");case 12:n.replace("/label/".concat(c._id,"/").concat(s._id)),this.setState({isLoaded:!0,project:c,image:s}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),this.setState({isLoaded:!0,error:e.t0});case 19:case"end":return e.stop()}},e,this,[[3,16]])}));return function(){return e.apply(this,arguments)}}()},{key:"pushUpdate",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(t){var a;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.imageId,e.next=3,S("PATCH","".concat("http://localhost:8081","/api/images/").concat(a),{labelData:JSON.stringify(t)});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"markComplete",value:function(){var e=Object(Pe.a)(Ne.a.mark(function e(){var t;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.imageId,console.log("markComplete imageId",t),e.next=4,S("PATCH","".concat("http://localhost:8081","/api/images/").concat(t),{labeled:!0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.history,a=this.state,n=a.project,l=a.image,i=a.isLoaded,o=a.error;if(o)return r.a.createElement("div",null,"Error: ",o.message);if(!i)return r.a.createElement(Qe.a,{active:!0,inline:"centered"});var c="Image ".concat(l&&l._id?l._id:""," for project ").concat(n&&n.name?n.name:""," -- Label Tool"),s={onBack:function(){t.goBack()},onSkip:function(){var a=e.state.project||null,n=e.state.image||null,r="";if(n&&a){var l=Ve.a.findIndex(a.images,function(e){return e===n._id});l>-1&&l+1<a.images.length&&(r=a.images[l+1])}r&&""!==r?t.push("/label/".concat(a._id,"/").concat(r)):t.push("/label/".concat(a._id))},onSubmit:function(){e.markComplete();var a=e.state.project||null,n=e.state.image||null,r="";if(n&&a){var l=Ve.a.findIndex(a.images,function(e){return e===n._id});l>-1&&l+1<a.images.length&&(r=a.images[l+1])}r&&""!==r?t.push("/label/".concat(a._id,"/").concat(r)):t.push("/label/".concat(a._id))},onLabelChange:this.pushUpdate.bind(this)},u=n.referenceLink,m=n.referenceText;return r.a.createElement(nt.a,{title:c},r.a.createElement(Ua,Object.assign({labels:n.form.formParts,reference:{referenceLink:u,referenceText:m},labelData:l.labelData.labels||{},imageUrl:"".concat("http://localhost:8081").concat(l.link),externalImageUrl:l.externalLink,fetch:this.fetch.bind(this),demo:"demo"===n._id},s)))}}]),a}(n.Component),$a=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.match.params.projectId;return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-hero",style:{minHeight:"75px",backgroundImage:"linear-gradient(45deg, rgb(229, 44, 78) 1%, rgb(233, 74, 99) 30%, rgb(174, 82, 157) 69%, rgb(154, 85, 177) 100%)",color:"white"}}),r.a.createElement(be.a,{style:{maxWidth:600,margin:"100px auto"}},r.a.createElement(be.a.Header,null,"No more images in this project"),r.a.createElement("p",null,"To upload more images or view previously tagged ones head to the"," ",r.a.createElement("a",{href:"/#/admin/".concat(e)},"admin panel"),".")))}}]),a}(n.Component),Ja=function(e){var t=e.browserLang,a="linear-gradient(45deg, rgba(0, 26, 255, 0.7) 1%, rgb(99, 97, 238) 30%, rgb(119, 99, 213) 69%, rgb(161, 103, 161) 100%),url(".concat("images/background-image-hero.jpg",")");return r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"App-hero",style:{minHeight:"75px",backgroundImage:a,color:"white"}}),r.a.createElement("div",{style:{paddingTop:"16px",marginLeft:"40px",marginRight:"40px"}},r.a.createElement("h1",null,"en"===t?"404 - Not Found!":"404 - No Existe Esta P\xe1gina"),r.a.createElement("a",{href:"/"},"en"===t?"Go Home":"Volver al Inicio")))},Ya=function(e){var t=function(t){Object(s.a)(n,t);var a=Object(u.a)(n);function n(){return Object(o.a)(this,n),a.apply(this,arguments)}return Object(c.a)(n,[{key:"componentWillMount",value:function(){console.log("componentWillMount",this.props),!1===this.props.isAuthenticated&&"/signin"!==this.props.location.pathname&&this.props.history.push("/signin")}},{key:"componentWillUpdate",value:function(e){console.log("componentWillUpdate",e),!1===e.isAuthenticated&&"/signin"!==this.props.location.pathname&&this.props.history.push("/signin")}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),n}(n.Component);return Object(C.b)(function(e){return{isAuthenticated:e.currentUser.isAuthenticated,currentUser:e.currentUser.user,language:e.language}},{setUserLanguage:z,updateCurrentUser:M})(t)}(Je),Qa=function(e){ue.a.set({page:e}),ue.a.pageview(e)},Za=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(U.HashRouter,null,r.a.createElement(k.g,null,r.a.createElement(k.d,{path:"/data-labeling",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(fe,Object.assign({browserLang:e.props.language},e.props))}}),r.a.createElement(k.d,{path:"/pavements-analysis",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(ke,Object.assign({browserLang:e.props.language},e.props))}}),r.a.createElement(k.d,{path:"/ai-consulting",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(Ce,Object.assign({browserLang:e.props.language},e.props))}}),r.a.createElement(k.d,{path:"/demo",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(Oe,Object.assign({browserLang:e.props.language},e.props))}}),r.a.createElement(k.d,{path:"/visualize",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(He,Object.assign({browserLang:e.props.language},e.props))}}),r.a.createElement(k.d,{exact:!0,path:"/label/:projectId",component:Va}),r.a.createElement(k.d,{exact:!0,path:"/label/:projectId/:imageId",render:function(e){return"over"===e.match.params.imageId?r.a.createElement($a,e):r.a.createElement(Va,e)}}),r.a.createElement(k.d,{path:"/label",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(et,Object.assign({browserLang:e.props.language},e.props))}}),r.a.createElement(k.d,{path:"/admin",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(Lt,Object.assign({browserLang:e.props.language},e.props))}}),r.a.createElement(k.d,{path:"/dashboard",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(Ya,Object.assign({browserLang:e.props.language},e.props))}}),r.a.createElement(k.d,{path:"/signin",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(we,Object.assign({onAuth:e.props.authUser,browserLang:e.props.language,errors:e.props.errors,buttonText:"en"===e.props.language?"Login Now":"Ingresar Ahora",heading:"en"===e.props.language?"Welcome Back":"Bienvenido de Vuelta",removeError:e.props.removeError,signUp:!1,removeAdditionalField:!0},e.props))}}),r.a.createElement(k.d,{exact:!0,path:"/",render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(pe,Object.assign({browserLang:e.props.language},e.props))}}),r.a.createElement(k.d,{render:function(t){var a=e.props.location.pathname;return Qa(a),r.a.createElement(Ja,Object.assign({browserLang:e.props.language},e.props))}})))}}]),a}(r.a.Component);var Ka=Object(k.o)(Object(C.b)(function(e){return{currentUser:e.currentUser,errors:e.errors,language:e.language}},{authUser:function(e,t){return function(a){return new Promise(function(n,r){return S("post","".concat("http://localhost:8081","/api/auth/").concat(e),t).then(function(e){var t=e.token,r=Object(x.a)(e,["token"]);localStorage.setItem("enginJwtToken",t),F(t),a(L(r)),a(A()),n()}).catch(function(e){var t="Something Went Wrong, Please refresh the page and try again";e&&e.hasOwnProperty("message")&&(t=e.message),a(R(t)),r()})})}},removeError:A})(Za)),Xa=a(85),en={isAuthenticated:!1,user:{}},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_LANGUAGE":return t.language;default:return e}},an=Object(Xa.c)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return{isAuthenticated:!!Object.keys(t.user).length,user:t.user};case"UPDATE_USER":return t.user?Object(H.a)({},e,{},t.user):e;default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ERROR":return Object(H.a)({},e,{message:t.error});case"REMOVE_ERROR":return Object(H.a)({},e,{message:null});default:return e}},language:tn}),nn=a(370);var rn=a(371),ln=a.n(rn),on=Object(Xa.e)(an,Object(Xa.d)(Object(Xa.a)(nn.a),window.devToolsExtension?window.devToolsExtension():function(e){return e})),cn=T()().toLowerCase(),sn="en";if(cn.indexOf("en")<0&&(sn=cn),localStorage.enginJwtToken){F(localStorage.enginJwtToken);try{on.dispatch(L(ln()(localStorage.enginJwtToken)))}catch(mn){on.dispatch(L({}))}}localStorage.language?on.dispatch(z(localStorage.language)):on.dispatch(z(sn));var un=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){return Object(o.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){ue.a.initialize("UA-144858526-3",{debug:!1,titleCase:!1})}},{key:"render",value:function(){return r.a.createElement(C.a,{store:on},r.a.createElement("div",{style:{overflow:"hidden"}},r.a.createElement("div",{className:"App"},r.a.createElement(U.HashRouter,null,r.a.createElement(_,{browserLang:sn}),r.a.createElement(Ka,{browserLang:sn})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(un,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[383,1,2]]]);
//# sourceMappingURL=main.211cf9a7.chunk.js.map